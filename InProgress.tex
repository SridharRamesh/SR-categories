\filestart

\section{Scratch work in progress}

\subsection{Unorganized draft category-theoretic lemmas}

\subsubsection{Initial algebra constructions}
\TODO

\subsubsection{Theories, models, functors, etc}
\begin{observation}\label{ModelTerminology}
We need to standardize our terminology on theories, models, and internal models. Is a lexfunctor from $T$ to $S$ an internal model of $T$ in $S$? Or is a lexfunctor from $T$ to the globalization of an internal category in $S$ an internal model of $T$ in $S$? Is a model always Set-valued? Etc. Let us do a Ctrl+F for "model" to make sure we are not confusing on this point. It may be best to speak scrupulously of lexcategories and lexfunctors at all times, and not of theories or models, except in the fixed phrase "introspective theory".
\end{observation}

\TODOinline{
Introduce terminology for "the walking X" meaning "the free lexcategory with an internal X". "Internal X" always means "Map into me from the lex theory of Xes", and NOT "Internal lexcategory in me, and map into THAT from the lex theory of Xes". The latter should be called doubly internal. The theory of Xes has an internal X. Hm. Maybe we need good terminology for "the theory of blahs" vs "a blah", when blah is itself a lexcategory-extending notion.

Let's say \included/ models of theory T within lexcategory S refers to lexfunctors from the lexcategory corresponding to T, to S. While \interior/ models of T within S refers to the case where S has a designated internal lexcategory C, and we also have a lexfunctor from T to the globalization of C. In other words, \interior/ is doubly internal.

The weird thing is that the identity lexfunctor on a category also corresponds to the generic internal model, even though the identity seems like staying on the same level, while internal sounds like going down one level. Hence why actually going down a level with \interior/ corresponds to doubly internal.}

\subsubsection{Constructing initializers}
So, for example, let us try constructing, for a lexcategory $T$, the initial lexcategory with an internal initial model of $T$. We find some quasi-equational theory $Th(T)$ presenting $T$. This theory is k-sized, so we work from now on in k-ary quasi-equational theories. We now make the k-ary quasi-equational theory of a strict lexcategory with an internal initial model of $Th(T)$, and apply the initial algebra theorem. We get an initial strict lexcategory with an internal initial model of $Th(T)$; call this $S$.

Suppose we have three quasi-equational theories:
Th(T)
Th(Init-T')
Th(D)

These present strict lexcategories
T'
Init-T'
D'

These present lexcategories
T
Init-T
D

Th(T) is chosen to present T, with T' arising from this.
Th(Init-T') is chosen to present Init-T' as the free strict lexcategory with an internal initial model of Th(T). Init-T then arises from this.
Th(D) is chosen to present D, with D' arising from this.

For any initial model of Th(T) in D', we get a unique map from Init-T' to D' which restricts to the corresponding map from T' to D'.

Given two strict maps f, g from Init-T' to D' which both take T' to initial models in D', we want a unique transform from f to g. Transforms from f to g correspond by lemma 55 (even without the strictness assumption on f, g) to transforms between the corresponding models of Th(Init-T') in D'. We want [TODO] to show that these correspond to transforms between the corresponding models of Th(T) in D'. If we can do that, then since those models are initial, we get a unique map between them, as desired.

\TODOinline{Perhaps we should mark with asterisks those theorems which are specific to $\Set$ and perhaps use Choice vs those theorems which are meant to internalize broadly}

\subsubsection{Cartesian closure and \Loeb/'s theorem}
\begin{theorem}
Suppose $\langle T, C \rangle$ is a locally introspective simple theory (i.e., locally introspective finite product theory). Furthermore, suppose we have an object $0$ of $T$ such that all exponentials $0^t$ exist in $T$ (as in when $T$ is cartesian closed), and furthermore, there is a morphism in $T$ of type $\Box ((\Box 0) \implies 0) \vdash \Box 0$ (a \Loeb/ morphism). Let us refer to $0^X$ as $\neg X$. We then get a morphism in $T$ of type $1 \vdash \neg \neg \Box 0$; equivalently, a morphism of type $\neg \Box 0 \vdash 0$.
\end{theorem}
\begin{proof}
In $T$, we have $(\neg \Box 0) \times (\Box 0) \vdash 0$. There is also a general principle that if $T$ contains a morphism $X \times Y \vdash Z$, then $T$ also contains a morphism $X \vdash \Box (Y \implies Z)$ (by using $\introS$ to get $\Box X \vdash \Box(Y \implies Z)$, and then using $\introN$ to get $X \vdash \Box X$ and composing these).

Applying that general principle to this particular morphism, we find in $T$ a morphism $\neg \Box 0 \vdash \Box (\Box 0) \implies 0$. The right-hand side here combines with our \Loeb/ morphism; the result of this composition is $\neg \Box 0 \vdash \Box 0$. And from here we quickly get $\neg \Box 0 \vdash 0$, aka, $1 \vdash \neg \neg \Box 0$.
\end{proof}

(In fact, for an introspective theory, we get this more easily: simply consider the aspect of $T$ defined over $(\Box 0) \implies 0$.)

The above shows the undesirability of using exponentiation in a cartesian closed $T$ to model ordinary implication, when using introspective theories to model ordinary provability logic, as this would imply a certain degree of incompatibility with Boolean logic. Specifically, in a Boolean context, when $0$ is actual falsehood so that $\neg \neg$ is supposed to be identity, the above would give us the rule $1 \vdash \Box 0$, asserting provable falsehood.

The appropriate way to model provability logic complete with an implication operator is not to take $T$ to be cartesian closed, but rather, to take only $C$ to be an indexed cartesian closed category. Note that even if $T$ happens to be cartesian closed as well, we will in general not have that $\introF$ must preserve exponentials; that is, exponentials computed via $T$'s cartesian closed structure may well differ from exponentials computed via $C$'s cartesian closed structure (especially \TODOinline{Only?} if $C$ has objects not in the range of $\introF$). It is the latter which are most relevant for ordinary provability logic. Thus, although $T$ being cartesian closed will give us $\introS(\neg_T \Box 0_T) \vdash_C \introS(0_T)$, it will not give us $\neg_C \introS(\Box 0_T) \vdash_C \introS(0_T)$. We will see this explicitly in model \TODO and model \TODO.

\subsubsection{Cartesian closed categories and locally introspective theories}
\begin{theorem}
We observe here that a locally introspective simple (i.e., finite product) theory in which $T$ and $C$ are cartesian closed and $\introF$ preserves cartesian closed structure and is essentially surjective on objects is the same as a cartesian closed theory $T$ along with a finite product preserving operator $\Box_T$ and natural transformation $\introN : \id_T \to \Box_T$.
\end{theorem}
\begin{proof}
As a cartesian closed category, $T$ is enriched over itself. A finite product preserving functor from $T_1$ to $T_2$ turns enrichments over $T_1$ into enrichments over $T_2$; using this, we can construe $T$ instead as a category $C$ enriched over $T$, where the objects of $C$ are those of $T$ but $\Hom_C(t, s) = \Box_T \Hom_T(t, s) = \Box_T s^t$.

A category enriched over $T$ (with terminal object) is the same as a locally \repsmall/ $T$-indexed category such that every object in $C(t)$ is the pullback of some object in $C(1)$. Thus, the above has produced $C$ as a locally \repsmall/ $T$-indexed category. Since both $\Box$ and $-^t$ are product preserving endofunctors of $T$, it's easy to see that $\Hom_C(t, s_1 \times \ldots \times s_n) = \Hom_C(t, s_1) \times \ldots \times \Hom_C(t, s_n)$ so that $C$ furthermore has finite products. (We can also see that $C$ has exponentials, from \TODO).

For $\introS$, we send each object to itself and send each morphism $m: t \to s$ in $T$ (equivalently, $: 1 \to s^t$) to the corresponding value in $: 1 \to \Box(t^s)$ given by applying our natural transformation from identity to $\Box$. It is readily verified this is functorial and product-preserving (\TODO).

The required $\introN : t \to \Hom_C(1, \introS(t)) = \Box_T t$ is given by the supplied natural transformation as well. This completes this direction of the proof.

Put more cleanly:

% https://q.uiver.app/?q=WzAsNCxbMSwwLCJcXG9we1R9Il0sWzIsMCwiRmluUHJvZENhdCJdLFsxLDEsIlxcb3B7VH0iXSxbMCwwLCJcXG9we1R9Il0sWzAsMSwiVC8vLSJdLFsyLDEsIlxcTGFuX3tcXEJveH0oVC8vLSkiLDJdLFswLDIsIlxcQm94IiwyXSxbMywyLCJcXGlkIiwyXSxbMywwLCJcXGlkIl0sWzQsMiwiIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dLFswLDcsIiIsMix7InNob3J0ZW4iOnsidGFyZ2V0IjoyMH19XV0=
\[\begin{tikzcd}
	{\op{T}} & {\op{T}} & FinProdCat \\
	& {\op{T}}
	\arrow[""{name=0, anchor=center, inner sep=0}, "{T//-}", from=1-2, to=1-3]
	\arrow["{\Lan_{\Box}(T//-)}"', from=2-2, to=1-3]
	\arrow["\Box"', from=1-2, to=2-2]
	\arrow[""{name=1, anchor=center, inner sep=0}, "\id"', from=1-1, to=2-2]
	\arrow["\id", from=1-1, to=1-2]
	\arrow[shorten <=4pt, shorten >=4pt, Rightarrow, from=0, to=2-2]
	\arrow[shorten >=2pt, Rightarrow, from=1-2, to=1]
\end{tikzcd}\]

Plus the observation at https://sridharramesh.github.io/HowSridharThinks/math/IndexedEnrichedInternalCategories.html to ensure that the left Kan extension within $\Cat$ really does produce a category with finite products. Plus the verification that $\Hom_C(A, B) = \Box_T (B^A)$.

In the other direction (introspective theory with eso $\introF$ is cartesian closed $T$ plus operator), \TODO.
\end{proof}
Similarly, some analogue of the above for locally introspective finite limit theories? \TODO

\begin{TODOblock}
Similarly, some analogue of both of the above for geminal categories? The simplest observation is that, from any cartesian closed category C' with endo-fp-functor Box s.t. we have a natural transformation from Box to $\Box^2$ s.t. the two induced paths from Box to $\Box^3$ are equal, we can construct an introspective finite product theory T such that the objects of $T$ are finite products of objects of the form $\Hom_C(A, B)$ for objects $A$ and $B$ in $C(1)$, while the objects of $C$ at every aspect are the objects of $C'$. And of course $\introS(\Hom_C(A, B)) = \Box(B^A)$, while $\introN$ corresponds to our Box to $\Box^2$ operator. Maybe this is simpler put in terms of the observation as to what a geminal (simple/fp theory) cartesian closed category on given objects is.
\end{TODOblock}

\subsection{Cartesian closure and box}
We should be able to interpret $\Hom_C(S(a), S(b))$ as $\Box_T(a \implies b)$ for $a, b \in T$ with some analogy to how this works on $\Psh{C}$. (Search for where we say bifunctor in this document). Note that if $T$ is cartesian closed, this may be distinct from $\Box_T (B^A)$ using the cartesian closed structure of $T$ to define $B^A$.

If T is cartesian closed, we have $Hom_C(1, S(a -> b)) |- Hom_C(S(a), S(b))$, but not the other way around.

\subsection{Soundnesses}
\TODO

A global soundness is something like, given an introspective theory T, we can ask for a lexfunctor from T to Set which sends all of $\introN$'s components to isomorphisms.

This might be the same as asking of the lexfunctor (construed as a model M of T with an internal model M' and a homomorphism N from M to $Hom_M(1, M')$) to be such that this homomorphism $N : M \to \Hom_M(1, M')$ is an isomorphism.

-----

Note that we have a lexfunctor from T to (N -> T), because we have a functor from N to (T -lex-> T), which sends n to $Box^n$ and which sends the map from n to n + 1 to $\introN_{Box^n}$. (We want this map, not $\Box^n (\introN_{id})$)

Therefore, for any model M : T -Lex-> Set, we get also by composition a lexfunctor from T to (N -> Set). At each n, this specializes to the (globalization of the) geminal category n-tuply internal to the original model, and at each n to n + 1 map, this is the self-internalizing homomorphism of that geminal category (NOT the action of the original geminal category's self-internalizer on its internal categories).

But we also have a lexfunctor from (N -> Set) to Set given by taking colimits, since filtered colimits commute with finite limits.

Composing these, we get a lexfunctor from T to Set which is the colimit of all those models and homomorphisms. It should be possible to check directly that this colimit model is such that each $\introN$ component within it is an isomorphism. Thus, it has a soundness in the above sense. (I am no longer confident this works, I think it still falls apart on the failure of well-pointedness.)

----

The initial AU and the related Sigma1 models has such a super strong soundness: It is an introspective theory, with its C furthermore equipped as an internal introspective theory, and it is equivalent qua introspective theory to the globalization of this internal introspective theory (though of course it does not internally claim that C is equivalent to the globalization of C', thanks to G2IT).

\TODOinline{Returning to this months later, I think where it stood was like so: The above isn't exactly right and the problem is the well-pointedness failure. See https://ncatlab.org/nlab/show/transfinite+construction+of+free+algebras}

\subsection{Convenient terminology}
\begin{TODOblock}
Some note about how we will also make use in diagrams in this chapter liberally of the identification of $P(c)$ with $\Hom(c, P)$, when $P$ is a presheaf. If one likes, this can be seen as invoking the Yoneda lemma to draw diagrams in $\Psh{C}$ (although invoking the Yoneda lemma is actually a bit overkill for the mere fact that we can draw diagrams of presheaf elements and presheaf actions in this way, which is simply working within the appropriate collage, aka cocomma category).

We're a bit glib in all our writing when we swap between thinking of $x$ as an element in $X$, vs a map from $1$ to $X$, or similarly in swapping between a presheaf $\Omega^X$ and values in $\Omega(X)$ and morphisms from $X$ to $\Omega$, etc. Perhaps we should introduce some explicit notation for these kinds of conversions, to make everything perfectly clear.

Can move these notes to the Preliminaries.
\end{TODOblock}

\subsection{Fixed point interchange}
\begin{theorem}
Suppose $f : A \to B$ and $g : B \to A$. Then $f$ and $g$ comprise the two halves of a one-to-one correspondence between fixed points of $g \circ f$ and fixed points of $f \circ g$.
\end{theorem}

\subsection{Another box lemma}
\begin{theorem}\label{BoxMatchesN}
For a locally introspective theory (or finite product theory) $\langle T, C, \introS, \introN \rangle$, and a globally defined element $x$ of $P(1)$ for $P \in \Psh{C}$, we have that $\introN_{\Omega}(x)$ is the globally defined element of $(\Box P)(1)$ given by applying $\Box_{\Psh{C}}$ to $x$.
\end{theorem}
\begin{proof}
\TODO
\end{proof}

\subsection{Uniqueness of model constructions}
\begin{lemma}
Let $T$ be a lexcategory with a natural numbers object, such that every object of $T$ admits a monic map into the natural numbers object. Let $\Box$ be a lex endfunctor on $T$. There is at most one natural transformation from $\id_T$ to $\Box$.
\end{lemma}
\begin{proof}
Let $\nat$ be the natural numbers object of $T$, with zero map $z : 1 \to \nat$ and successor map $s : \nat \to \nat$. Note that $\Box z : 1 \to \Box \nat$ and $\Box s : \Box \nat \to \Box \nat$. Thus, by the universal property of $\nat$, there is a unique map $h : \nat \to \Box \nat$ such that $h \circ z = \Box z$ and $h \circ s = (\Box s) \circ h$.

Now we will show that each of the components of a natural transformation $\eta : \id_T \to \Box$ is uniquely determined (if such a natural transformation exists at all!).

First of all, by naturality of $\eta$ with respect to the morphisms $z$ and $s$, we see that any natural transformation $\eta : \id_T \to \Box$ would also be such that $\eta_{\nat} \circ z = \Box z$ and $\eta_{\nat} \circ s = (\Box s) \circ \eta_{\nat}$. Thus, we must have that $\eta_{\nat} = h$.

Furthermore, for any arbitrary object $t$ of $T$, consider some monic map $m : t \to \nat$. By naturality of $\eta$ with respect to $m$, we see that $(\Box m) \circ \eta_t = \eta_{\nat} \circ m$. Since $\Box m$ is monic (since $\Box$ as a lexfunctor preserves monicity), and since $\eta_{\nat}$ was already uniquely determined, this uniquely determines $\eta_t$ as well.
\end{proof}

\subsection{Geminal gadgets more generally}
A geminal gadget internal to lexcategory $C_0$ consists (among other things) of a sequence $G_1, C_1, G_2, C_2, G_3, C_3, \ldots$, where for $i \geq 0$, each $G_{i + 1}$ is a gadget internal to $C_i$ and each $C_{i + 1}$ is the global aspect of the underlying (strict) lexcategory of $G_{i + 1}$.

Note that $\Hom_{C_{i + 1}}(1, -)$ can be seen as a lexfunctor from $C_{i + 1}$ to $C_i$ (since $C_{i + 1}$ is the global aspect of a lexcategory internal to $C_i$). Call this global sections lexfunctor $\Gamma_i : C_{i + 1} \to C_i$.

We now also require a sequence of internal gadget-homomorphisms $F_1, F_2, F_3, \ldots$, where each $F_i : G_i \to \Gamma_i(G_{i + 1})$ is internal to $C_i$.

Finally, we impose some equations. We require that each $F_i$ takes $G_j$ to $G_{j + 1}$ and takes $F_j$ to $F_{j + 1}$ for $j > i$. Furthermore, we demand that each $F_i F_i = F_{i + 1} F_i$ in a suitable sense.

Note that all structure subscripted $j$ can be seen as $(j - i)$-tuply internal to $C_i$, for $j > i$. In particular, all of this structure is indeed internal to $C_0$.

Note furthermore that restricting attention to the sequence of $G_j$, $C_j$, and $F_j$ for $j > 1$ yields an instance of this structure internal to $C_1$.

Note even furthermore that $F_1$ acts as an internal homomorphism of this structure.

This all describes a geminal gadget internal to $C_0$.

\begin{theorem}
To uniquely generate all the rest of the aforementioned structure, it suffices only to be given $G_i$, $F_i$, and the equation $F_i F_i = F_{i + 1} F_i$ for $i \in \{1, 2\}$.
\end{theorem}
\begin{proof}
Define $G_n$ as $F_1^{n - 1}(G_2)$, and similarly define $F_n$ as $F_1^{n - 1}(F_2)$. \TODOinline{Clarify the notation, that $F_1(F_2)$ for example is not a composition but rather an application of a functor to the diagram specifying an internal functor. Can use square brackets instead.}

It is now automatically the case that $F_1$ takes $G_j$ to $G_{j + 1}$, and takes $F_j$ to $F_{j + 1}$.

Furthermore, we get the equation that $F_i F_i = F_{i + 1} F_i$, by applying $F_1^{n - 1}$ to the instance of this equation at $i = 2$.

What remains is only to see that each $F_i$ also takes $G_j$ to $G_{j + 1}$ and takes $F_j$ to $F_{j + 1}$, for $j > i$.

We prove this by induction on $i$. We have above established this for $i = 1$ as our base case. As for the inductive step, suppose we know this already holds for $i$. Then $F_{i + 1}[G_j] = F_{i + 1} [F_i [G_{j - 1}]] = (F_{i + 1} \circ F_i)[G_{j - 1}] = (F_i \circ F_i) = F_i [F_i [G_{j - 1}]] = F_i [G_j] = G_{j + 1}$. And similarly with $F$ in place of $G$ as well.
\end{proof}

\subsection{What follows is stuff to be removed, as it has been rewritten}

\subsection{Models based on \texorpdfstring{$\Sigma_1$}{Sigma-1} or arbitrary extensions of PA, or ZFC, or etc}
\TODOinline{I will write this section in a sloppy way for now and then improve it later.}

This section reviews and builds upon the construction previously seen at \cref{SigmaModelSimple}.

\begin{construction}\label{Sigma1ModelScratch}

Consider a sigma-1 theory $\tau$ extending PA (or ZFC, or any such thing), in the sense of an extension whose axioms are computably enumerable. Actually, for now, let's just consider PA simpliciter.

\TODOinline{It probably isn't easy to pin down in a clean way exactly the minimal kind of system in which this goes through, but it could be useful to name some weak subsystems of arithmetic in which it goes through. In particular, we should not expect this to go through in Robinson's Arithmetic Q which lacks induction entirely, but we should expect it to still work in systems that just have induction for $\Sigma_1$ formulae).}

Consider the category $T$ whose objects are the sigma-1 formulas $\phi(n, m)$ in the language of PA which define binary relations on the natural numbers which PA proves to be partial equivalence relations (i.e., symmetric and transitive). Given any two such formulas $\phi(n, m)$ and $\psi(n, m)$, a morphism in $T$ from $\phi$ to $\psi$ is a sigma-1 formula $F(n, m)$ on the natural numbers which PA proves to correspond to the graph of a function between the subquotients of $\mathbb{N}$ corresponding to $\phi$ and to $\psi$, respectively. That is, such that PA proves the universal closures of the following:

$F(n, m) \implies \phi(n, n) \wedge \psi(m, m)$

$\phi(n_1, n_2) \wedge \psi(m_1, m_2) \wedge F(n_1, m_1) \implies F(n_2, m_2)$

$\phi(n, n) \implies \exists m [F(n, m)]$

$F(n, m_1) \wedge F(n, m_2) \implies \psi(m_1, m_2)$.

Two such formulas $F(n, m)$ and $F'(n, m)$ are considered to be equal as morphisms from $\phi$ to $\psi$ if PA proves them to be equivalent (that is, if PA proves $F(n, m) \implies F'(n, m)$ and $F'(n, m) \implies F(n, m)$).

Given morphisms $F : \phi \to \psi$ and $G: \psi \to \chi$ of this sort, we define their composition in the usual way of composing functions represented as graphs, as $(F \circ G)(n, m) = \exists p [G(n, p) \wedge F(p, m)]$.

This all describes the category $T$, which one can verify is indeed a category and moreso, a category with finite limits.

\TODOinline{Perhaps instead of imposing PERs from the beginning, we start only with the category of RE sets, and then take its ex/lex completion or some such thing. Like so:}

Consider the category $T'$ whose objects are the sigma-1 formulas $\phi(n)$ in the language of PA, and such that a morphism from $\phi(n)$ to $\psi(m)$ is a sigma-1 formula $F(n, m)$ such that $PA$ proves $\forall n, m . F(n, m) \implies (\phi(n) \wedge \psi(m))$ and $\forall n . \phi(n) \implies \exists! m . F(n, m)$. Two such morphisms $F(n, m)$ and $G(n, m)$ are considered equal just in case PA proves $\forall n, m . F(n, m) \biimplies G(n, m)$. Morphisms compose in the obvious way; that is, the composition of $F(n, p)$ with $G(p, m)$ is given by $(G \circ F)(n, m) = \exists p (F(n, p) \wedge G(p, m))$.

This category $T'$ is regular but not exact (that is, not every equivalence relation in $T'$ admits a corresponding quotient). Let $T$ be its ex/reg completion.

\TODOinline{Now, we describe the C inside T which is its internal copy, just by carrying out this exact same construction internal to T, and then we describe the indexed lexfunctor from T to C, which is a little more interesting or takes a little more care. Having this functor be indexed is where the sigma-1 restriction is important.}
\end{construction}

\TODOinline{Observe that we have somewhat distinct concepts of "T = PA Sigma-1, C = ZFC Sigma-1" vs "T = ZFC Sigma-1, C = ZFC Sigma-1", say. Also observe that as concerns ZFC, we can also consider for $C$ not just categories of definable subsets of naturals, but also of definable sets in general, or of definable classes.}

\subsection{Finitely axiomatizable lex theories}
A concept that will often be useful to us in the following.

\begin{definition}
A \defined{finitely axiomatizable lex theory} is a lexcategory $W$ which can be generated in finitely many steps of the following form, starting from the initial lexcategory: free augmentation (qua lexcategory) with an object, free augmentation (qua lexcategory) with a morphism between two existing objects, or freely (qua lexcategory) making two existing parallel morphisms equal. In other words, it can be presented by a finite lex \quote{sketch}.
\end{definition}

If $W$ is a finitely axiomatizable lex theory, and $C$ is an internal lexcategory within a lexcategory $T$, then the set of lexfunctors from $W$ to $C$ is $T$-\repsmall/. This can be seen readily from the inductive definition of finite axiomatizability: 

\begin{TODOblock}
Discuss the concept of a lexcategory having initial internal models of ALL finitely axiomatizable lex theories.

As a bit of trivia, observe how this follows simply from having an internal free locally cartesian closed category on one object (verify the details on this; or perhaps from having internal free lex categories and the ability to freely augment internal lex categories with a new cell). Regardless of whether those details work out, conjecture that there are finitely many finitely axiomatizable lex theories such that having internal initial models of those implies having internal initial models of all finitely axiomatizable lex theories, so that the latter is itself a finitely axiomatizable condition.

Relate this also to the concept of arithmetic universes. Conjecturally, being an arithmetic universe is equivalent to something like having free internal models for sketches indexed by finite unions of internal objects (but there seems to be some hesitance in the literature to claim this? Understand that better). At any rate, an arithmetic universe should have internal initial models of all finitely axiomatizable lex theories.

This section basically only exists in order to claim that finitely axiomatizable lex theories which extend the theory of arithmetic universes are automatically examples of the next section.
\end{TODOblock}

\subsection{Self-initializing finitely axiomatizable theories}
\TODOinline{Get rid of this section}

\magicref{InitoGeminalYieldsGeminal} immediately gives us many nontrivial examples of geminal categories. For example, many theories $T$ simultaneously satisfy the following two properties:

A) $T$ is a finitely axiomatizable lex theory extending the theory of lex categories.

B) Every model of $T$ contains initial internal models of every finitely axiomatizable lex theory.

Any such $T$ will of course be \initogeminal/.

For example, consider the theory of strict elementary toposes with natural numbers objects (let us call this an \defined{NNO-topos}, to make it less of a mouthful). This is indeed a finitely axiomatizable lex theory extending the theory of lexcategories \TODOinline{Maybe make up a name for lex theories extending the theory of lexcategories, since we use them often, need them to define our concept of truly internal models, etc}. Furthermore, it satisfies the property B just noted:

\begin{theorem}\label{NNOToposIsInitoGeminal}
Every NNO-topos has an initial internal model of every finitely axiomatizable lex theory. Such initial internal models are furthermore preserved by functors preserving NNO-topos structure.
\end{theorem}
\begin{proof}
\TODOinline{Mention that terms can be partially defined (that is, not all terms denote), in the following}
This is simply by carrying out in its internal logic the ordinary mathematical construction establishing the existence of initial models of finitely axiomatizable lex theories. We do not give here a detailed proof, but sketch the key ideas:

We need to construct, internally to an arbitrary NNO-topos, the set of well-founded finitely branching labelled rooted trees corresponding to the term model (the labels on the nodes of the tree corresponding to the operators which build new terms or new equations from old ones in the algebraic theory). Once we have constructed these, we use effective regularity to quotient the trees corresponding to definable terms by the equivalence relation induced by trees corresponding to derivable equations. All difficulty is just in first constructing this object of well-founded labelled trees (a so-called W-type).

We first of all take a finite coproduct of $1$s to serve as the object of labels. This suffices as we only need finitely many labels for a finitely axiomatizable theory.

Next, we note that we can define the set of lists of $X$es in suitable fashion. For example, we can define lists of $X$es as suitable partial functions with domain $\nat$ and codomain $X$ (returning the $n$th element of a given list). This definition can then be interpreted in NNO-toposes using cartesian closure and subobject comprehension.

Finally, we can define the sets of arbitrary or well-founded countably branching trees similarly, as, e.g., suitable partial functions with domain the set of lists of naturals and codomain the set of labels (returning the label found by traversing a given sequence of branch indices down from the root). We can express within the internal logic of topos theory the conditions corresponding to being a well-founded tree formed by appropriate applications of the constructors of our algebraic theory (by a suitable quantification over the power object). We can thus take the appropriate subobject of the set of all such partial functions, to get the set of well-formed labelled trees we are interested in.

Finally, the well-foundedness of these trees lets us prove inductively the existence of partial functions satisfying any particular recursion conditions with any particular tree in their domain, and lets us prove that any two such partial functions agree wherever both are defined. An impredicative union of all such partial functions then yields a unique total function defined by such recursion. This gives us the unique homomorphisms from the term model to other internal models, establishing the term model as the initial internal model.

This is one simple approach available to us for constructing initial models in an NNO-topos. Other approaches are possible as well. \TODOinline{For example, by making the observation that arithmetic universes have the same property, and NNO-toposes are arithmetic universes.}

\TODOinline{Make further observation about k-ary theories, when we have k-ary coproducts. Note that it is key here how the theory actually recognizes internally anything which is externally a model of such an infinitary theory, as we can construct any external function on domain k as an internal map. Once we've noted the version of this for arbitrary k, we can invoke it later on when we wish to make any initial model in actual Set of an infinitary sort.}
\end{proof}

From \magicref{NNOToposIsInitoGeminal} and the finite axiomatizability of the theory of NNO-toposes, we have that in particular, the initial NNO-topos has an initial internal NNO-topos. That is to say, the theory of NNO-toposes is \initogeminal/. Thus, by \magicref{InitoGeminalYieldsGeminal}, the initial NNO-topos is equipped as a geminal NNO-topos (a fortiori, a geminal category).

\begin{warningenv}\label{InitoGeminalWarning}
It is important to observe that the initial NNO-topos is NOT an introspective theory! Using the name $G$ for the initial NNO-topos and $G'$ for its internal initial NNO-topos, we should not expect to have natural maps in $G$ from $t$ to $\Hom_{G'}(1, \introS(t)))$ (i.e., $\Box t$) for general $t$, as the $\introN$ of an introspective theory would provide. For example, we will not have notable maps of type $\Omega \to \Box \Omega$ or $\nat^{\nat} \to \Box(\nat^{\nat})$ (the presence of such a map would express the absurd logical assertion that every function from naturals to naturals (every such function at all) induces some corresponding definable morphism in the initial NNO-topos.). We have merely equipped it as a geminal category. We will in some cases have canonical such requoting maps (e.g., a map $: \nat \to \Box \nat$ will be available by initial algebra properties of $\nat$), but not in general.

So the construction in \magicref{InitoGeminalYieldsGeminal} does not give us new introspective theories. Rather, it takes the introspective theory of geminal gadgets (which we already constructed in \TODO) and constructs a model of it, for suitable notions of \quote{gadget}.
\end{warningenv}

Having established that NNO-toposes have initial internal models of all finitely axiomatizable theories, it follows that any finitely axiomatizable theory extending the theory of NNO-toposes is \initogeminal/.

Due to work by Maietti et al following in the footsteps of Joyal (\TODOinline{cite}), it is also known that any arithmetic universe contains an internal initial model of any finitely axiomatizable theory.

Thus, also, the theory of arithmetic universes is \initogeminal/, and thus the initial arithmetic universe can be equipped as a geminal arithmetic universe (a fortiori, a geminal category). Thus, we get \Godel/'s incompleteness results manifesting within the initial arithmetic universe. This is the structure discussed by Joyal in unpublished work on a category-theoretic account of \Godel/'s incompleteness theorem, and further discussed by others after Joyal (see in particular \autocite{van2020g}).

The fact that every NNO-topos contains an initial model of every finitely axiomatizable lex theory can of course be taken as a special case of the fact that every arithmetic universe has the same property, since NNO-toposes are straightforawrdly arithmetic universes. But the construction of initial internal models in an NNO-topos can also be carried out by much easier means than are available in an arbitrary arithmetic universe; e.g., as in the proof sketch we gave at \magicref{NNOToposIsInitoGeminal}, which made essential use of cartesian closure, quantification over power objects, and the like.

Of course, we could directly consider the theory of a lexcategory with an initial internal model for every finitely axiomatizable theory. This would be interno-geminal... if it were finitely axiomatizable. In the form we just stated this theory, it was axiomatized infinitely (there is a separate imposed basic constructor for every particular finitely axiomatizable theory). It is an open question to this author whether this theory admits some alternative finite selection of basic constructors allowing it to be finitely axiomatized.

\TODOinline{Still, stress that finite axiomatizability isn't the key thing. We have after all the theory of a topos with countable coproducts as a \initogeminal/ theory}.

It is a similarly open question whether there is an initial \initogeminal/ theory (in either the sense without or with the parenthetical condition noted at \magicref{InitoGeminalYieldsGeminal}). The theory of \initogeminal/ theories is not known to be equivalent to any lex theory (the condition for $T$ to be \initogeminal/ involves a higher-order quantification over all endolexfunctors of $T$), so we do not automatically have the existence of an initial such structure.

Just as with \magicref{InitoGeminalWarning}, we should remark that again, as of yet, we have only equipped the initial arithmetic universe as a geminal category, not an introspective theory. But it will turn out that, unlike the typical situation for a \initogeminal/ theory as with the initial NNO-topos, the theory of arithmetic universes is so special that we can in fact further equip it in a natural way as an introspective theory! We shall come back to this at the end of the next section, after developing some more tooling for constructing more sophisticated introspective theories from \initogeminal/ theories in general.

\TODOinline{Reorganize order of paragraphs here for clarity. Discuss toposes with k-ary coproducts as mentioned above.}

\TODOinline{Note that we have a soundness result for the geminal categories we get from the initial NNO-topos, the initial arithmetic universe, etc: Their internal views of the initial such-and-such do in fact match themselves; the uniquely determined structure-preserving (AU-preserving or NNO-topos-preserving) functor from these things to Set takes their internal initial such-and-such to themselves. We don't have this kind of soundness for all \initogeminal/ theories. For example, we might consider the theory of bloposes, where a blopos is an NNO topos in which the internal initial NNO topos is trivially 1. That is, a blopos is a topos that thinks the theory of toposes is inconsistent. Then the theory of bloposes incorrectly proves that the theory of bloposes is inconsistent, so the initial blopos is nontrivial, but its internal initial blopos is trivial. The key thing that makes bloposes different from toposes is that Set is itself a topos (and an AU and so on), but not a blopos. Our soundness result is only for those theories which Set itself models.}

\subsection{Soundnesses for self-initializing theories}
\begin{TODOblock}
When the self-initializing theory Th is such that furthermore Set is a model of Th, then we furthermore get a soundness result here: The map from the initial model M of Th (the one defined by global elements in the lexcategory corresponding to T) to Set takes M's interior initial model of Th to the actual M in Set, and so on.

Thus, we get a homomorphism from the globalization of M's interior initial model of Th to the actual M. Since M is initial, this homomorphism onto it is a retraction. Thus, the map from M into the globalization of its internal model has a left inverse.

Note the following two caveats:

1. This composition needn't be identity in the other order.

Proof: Let p be a proposition which is independent from PA, and consider the corresponding term t : 1 -> 1 + 1, well-defined classically. The map from M' to M to M' will take the term t living in M' to its interpretation as an actual particular Boolean in the internal logic of M (that is, M will prove internally that this is either True or False) and then to that actual particular Boolean as a canonical term (that is, M will prove internally that the resulting value in M' is either "True" or "False"), but that canonical term will not be equal to the original term since t is neither provably equal to True nor provably equal to False.

Actually, I'm no longer convinced this argument is correct. The map from M to M' isn't necessarily one which sends terms for Booleans to the corresponding canonical terms. These are geminal structures, not introspective ones.

A better (but not great) argument might be that we can consider a theory like T = PA augmented with a random constant for a random term in PA'. This random constant will then persist into T' as well, but this random constant obviously won't be provably equivalent to anything canonical. However, there's some sense in which we can nonetheless think of Set as a model of T (in various inequivalent ways!), sending the random constant to any random old thing. What's not great here is the lack of universal properties fixing the value of the constant in Set.

2. If Set is not a model of Th to begin with, there needn't even be a homomorphism from M's internal model to M in the first place.

Proof: Let Th be a theory corresponding to PA + ~Con(PA) or the like. Then the initial model M of Th is nontrivial, i.e. doesn't prove 1 = 0 (since PA + ~Con(PA) is consistent, since PA doesn't prove Con(PA), by G2IT). However, M's internal initial model of Th is trivial, i.e. proves 1 = 0 (since Th proves ~Con(PA) which in turn entails ~Con(Th)). We cannot have a homomorphism from the latter to the former.

We can think of this in terms of arithmetic universes rather than Peano Arithmetic as well. The initial AU whose internal initial AU is terminal is not itself terminal.
\end{TODOblock}

\subsection{Local intro to intro}
\begin{construction}
Let $\langle T, C \rangle$ be a locally introspective theory. Suppose given a $T$-small set $X$ and a map $i : X \to \Ob(C)$ such that the full subcategory of $C$ restricted to those objects in the range of $i$ is in fact a sublexcategory.

This full sublexcategory thus gives us a $T$-internal lexcategory we may call $C'$, with $\Ob(C') = X$.

Suppose furthermore the condition is satisfied that $\introS(\Mor(C'))$ lies in the range of $i$ (in the sense that there is a global element of $X$ which is taken by $i$ to $\introS(\Mor(C'))$).

Then using \magicref{SubPreIntrosp}, we may first pass from our original locally introspective theory $\langle T, C \rangle$ to a locally introspective theory $\langle T', C \rangle$, such that $T'$ is the full sublexcategory of $T$ restricted to those objects $t$ for which $\introS(t)$ lies in the range of $i$.

By our presupposition, $\Mor(C')$ lies in this $T'$. Furthermore, $\Ob(C')$ therefore does as well (as this is a retract of $\Mor(C')$ and thus contained in any full sublexcategory containing $\Mor(C')$). Thus, $C'$ is a lexcategory internal to $T'$. Furthermore, by presupposition, $\introS : T' \to \Glob{C}$ factors through the inclusion of $C'$ into $C$.

We may now use \magicref{SubPreIntrosp} to pass from our locally introspective theory $\langle T', C \rangle$ to an introspective theory $\langle T', C' \rangle$.
\end{construction}

By an \quote{inverse category} is meant a category whose non-identity morphisms are closed under binary composition, and such that the relation on objects \quote{"There is a non-identity morphism from $A$ to $B$"} which we will denote $A < B$ is well-founded.

Given an inverse category $T$ and an object $t \in T$, we will say \quote{$T_{< t}$} in the following to mean the full subcategory of $T$ consisting only of objects from which there is some non-identity morphism to $t$. And we will say \quote{$T_{\leq t}$} to mean the full subcategory of $T$ consisting only of objects from which there is some morphism to $t$ (thus, $T_{\leq t}$ comprises the objects of $T_{< t}$ along with $t$ itself).

\begin{construction}
Let $T$ be a small inverse category. Suppose given a system of operators $F_t$ such that each $F_t$ takes as input a small full subcategory of $\Psh{T_{< t}}$ and produces as output a small full subcategory of $\Psh{T_{\leq t}}$.

Then we may recursively define small full subcategories $P_{< t}$ of each $\Psh{T_{< t}}$ and full subcategories $P_{\leq t}$ of each $\Psh{T_{\leq t}}$ such that each $P_{\leq t}$ is given by applying $F_t$ to the corresponding $P_{< t}$, while each $P_{< t}$ comprises precisely those presheaves in $\Psh{T_{< t}}$ whose restriction to any $\Psh{T_{\leq s}}$ for $s < t$ lies in $P_{\leq s}$. (Note that this is indeed small, using our stipulations that $T$ and the outputs from $F_t$ are small.)

We may then in the same manner define overall a small full subcategory $P$ of $\Psh{T}$, comprising precisely those presheaves whose restriction to any $T_{\leq t}$ lies in $P_{\leq t}$.

A common special case of the above is when each operator $F_t$ is of the following form: There is a map $G_t$ from small full subcategories of $\Psh{T_{< t}}$ to small full subcategories of $\Set$, and $F_t$ sends any small full subcategory $x$ of $\Psh{T_{< t}}$ to the small full subcategory of $\Psh{T_{\leq t}}$ comprising those presheaves whose value at $t$ lies in $G_t(x)$ and whose restriction to $\Psh{T_{< t}}$ lies in $x$.

In this case, our recursive construction of $P$ comprises precisely those presheaves in $\Psh{T}$ whose value at each object $t$ lies in some corresponding full subcategory $g_t$ of $\Set$. $P_{< t}$ and $P_{\leq t}$ are similarly defined using the same $g_t$, and each $g_t$ is given by applying $G_t$ to $P_{< t}$.
\end{construction}

The operators $F_t$ can easily be chosen to always yield outputs closed under finite limits, and/or closed under countable limits, and/or closed under topos operations, and/or containing all of a designated small number of presheaves, etc, without harm to the result still being small.

In particular, we may apply the above taking $G_t$ to be the operator which, for any small full subcategory $x$ of $\Psh{T_{< t}}$, picks out the smallest full sublexcategory of $\Set$ containing $x$ as an internal category. \TODOinline{Strictness concerns here? We need $x$ to come with the data of a designated set of objects. We should thread this through everywhere; everything should be thought of as strict categories here, and we are talking about strict small full subcategories, etc.}

\TODOinline{Discuss how topos operations like powerset are defined in a presheaf topos $\Psh{T}$ at an object $t$ only with dependence on the values at $\Psh{T_{\leq t}}$. This is because $\Psh{T_{\leq t}}$ can be identified with a slice topos of $\Psh{T}$, specifically over a suitable subterminal object. (And a similar property holds of our $\Box$ operator...). This has the effect that if each $F_t$ produces a $P_{\leq t}$ closed under topos operations, then each $P_{< t}$ and $P$ itself will be closed under topos operations.}

\begin{construction}
Let functor $i : D \to S$ be given. We will also associate to every object $s \in S$ a corresponding full subcategory $\Set_s$ of $\Set$, like so: \TODO
\end{construction}

\begin{lemma}
Let $A$ be a small set of objects of a locally small topos $B$, such that $A$ is closed under finite limits and power objects. Then the objects of $B$ which arise as subobjects of objects in $A$ comprise a small full subtopos of $B$.
\end{lemma}

\begin{lemma}
For any small set of objects of $\Set$, there is a small full subtopos of $\Set$ containing those objects.
\end{lemma}
\begin{proof}
Consider the collection $A$ of all objects of $\Set$ generable from the given small set using finite products and power objects, then apply the above lemma.
\end{proof}

\begin{construction}
Throughout the following, we take all categories (or lexcategories or toposes, etc) to be strict, including $\Set$.

Let $i : D \to S$ be an arbitrary functor between small categories. We will assign a small full subtopos of $\Set$ to each object of $S$. Using $i$, this induces also such an assignment to each object of $D$. Each of these small full subtoposes will also contain $D$ and $S$ themselves. As a result, the correspondingly constrained presheaf categories on $D$ and on $S$ will themselves be subtoposes of the unconstrained presheaf categories.

Furthermore, we request that on each $s \in S$, the corresponding full subtopos of $\Set$ contains the constrained category of presheaves on ($D$ restricted to objects whose image under $i$ is below $s$). This can be inductively achieved so long as $S$ is well-founded qua category. Or maybe, it should be some kind of limit here that we consider, hm.

Our $i$ clearly continues to induce a functor from the constrained presheaves on $S$ to the constrained presheaves on $D$. Ideally, this still has a right adjoint (Kan extension), but I suppose this isn't really important.


\end{construction}

Suppose given a category $S_{\leq s}$ such that for all $t < s \in S_{\leq s}$, we have an associated (lex-closed) cardinal $K_t$. Now we consider $K-\Psh{S_{\leq s}}$, meaning the presheaves constrained by these cardinality restrictions, with no cardinality restriction at $s$ itself. This maps into unconstrained $\Psh{S_{\leq s}}$. This maps into $\Psh{S_{< s}}$ by a process corresponding to our $H$. This in turn induces a map into $\Psh{D_{< s}}$, where $D_{< s}$ is the subcategory of $D$ that maps into $S_{< s}$ under the map from $D$ to $S$. There is a sub-lexcategory of $\Psh{D_{< s}}$ which we may call $K-\Psh{D_{< s}}$, using the cardinality restrictions on each object of $D$ from the associated object of $S$. This induces a sub-lexcategory of the self-indexing of $\Psh{D_{< s}}$, which we may call $K-\Psh{D_{< s}}/\Psh{D_{< s}}$ (given a lexcategory $L$ with sub-lexcategory $M$, we may consider the sub-lexcategory of $L/-$ comprising those slices whose pullback above any object of $M$ has domain in $M$ as well). 

So, taking this indexed lexcategory $K-\Psh{D_{< s}}/\Psh{D_{< s}}$ and transporting it along all our maps into a lexcategory indexed over $K-\Psh{S_{\leq s}}$, we may ask for this to be small. Is this the case? Our claim is that this is always small whenever the corresponding constructions are small at each $K-\Psh{S_{\leq t}}$ for $t < s$. \TODO. Because this is small, it has a representing object, and this representing object allows us to now add a cardinality constraint at $s$ itself, which just has to be large enough to contain the value at $s$ of the representing object, for the whole thing to be small even over the subcategory $K'-\Psh{S_{\leq s}}$ of $K-\Psh{S_{\leq s}}$, where $K'$ has been augmented to include this extra cardinality constraint at $s$.

For the \TODO, there should always be a representing object inside unconstrained $\Psh{S_{\leq s}}$, which we obtain by just examining the corresponding values at $S_{\leq s}$ (identified with its Yoneda embedding) itself (plus some reasoning about how all other presheaves are colimits of representable ones, and the indexed category of interest respects these colimits; \TODO). Ok, here it may be important that the Yoneda embedding of $s$ actually lies within $K-\Psh{S_{\leq s}}$, so our cardinality constraints need to be loose enough to contain all of $S$, say. Now if we look at the indexed category of interest at $s$, it becomes a certain slice category within $K-\Psh{D_{< s}}$. Since $K-\Psh{D_{< s}}$ itself is set-sized, this is set-sized, and so we just need that particular set to be within our cardinality constraint at $s$. (Plus whatever reasoning about how stuff at $t < s$ is automatic from restrictions to $S_{\leq t}$; \TODO).

How do the restriction maps here work on the representing object? We may have to assume a coherent system of pullbacks between slice categories in $\Psh{D}$ in order to have the restriction maps commute appropriately. This should follow from https://mathoverflow.net/questions/23887/slices-of-presheaf-categories.

If P is a presheaf category, there is a functor Grothendieck: P -> StrictCat which sends each presheaf to its category of elements. We also have a contravariant functor Psh : StrictCat -> LexCat where Psh = Hom(-, Set). The self-indexing P/- is then the same as Psh(Grothendieck(-)). We can read Psh as going from StrictCat to StrictCat if we take Set to be a strict category.

We next have to add in thinking about "ramps" (cardinality constraints) on presheaves.

Let S be a set-sized category. By a \quote{ramp} K on S, we mean an assignment of a set-sized collection of sets K(s) to each object s of S. By a K-presheaf on S, we mean a presheaf P on S such that for each s in S, we have that P(s) is among the sets in K(s). These comprise a set-sized full subcategory of Psh(S), which we may call K-Psh(S).

What's more, K-Psh(S) extends also to a set-sized full subcategory of the self-indexing Psh(S)/- (set-sized and full in the sense of giving set-sized full subcategories of Psh(S)/P at each P in Psh(S)). It will be helpful to keep in mind that Psh(S)/P can be identified with Psh(Grothendieck(P)), where Grothendieck(P) is the category of elements for P. Grothendieck acts as a functor from Psh(S) to StrictCat/S (a slice category of StrictCat, with strictly commutative triangles). We can take a ramp on Grothendieck(P) where K(p in Grothendieck(P) above s in S) = K(s). Using this, we can construct K-Psh(Grothendieck(P)). The map from P to K-Psh(Grothendieck(P)) gives a Psh(S)-indexed category. (indeed, a Psh(S)-indexed strict category, and one where all the reindexings preserve (non-strictly) limits of such size as K is closed under). This in fact is repsmall; thus, we get a corresponding Psh(S)-internal category (an internal lexcategory, even, supposing K is closed under finite limits).

\subsubsection{Old stuff from Models chapter on presheaf models}
There are two flavors of models here: Those which give introspective theories (these come from well-founded trees using a certain size restriction; e.g., considering a model based on the von Neumann universe/cumulative hierarchy), and those which give only locally introspective theories with \Loeb/'s theorem fixed points (these come from arbitrary well-founded trees; these are related to the models used in guarded recursion theory, but our distinction between the roles of $T$ and $C$ has previously gone unnoticed and allows us to interpret these models as not proving $\lnot \lnot \Box 0$). We discuss the latter construction first, as it is simpler, and a step en route to grasping the former construction.

\TODOinline{Wherever above I put a set-sized constraint on a category (such as $S$ or $D$), it sounds like I am constraining the category to not be too large. But really what this amounts to is to say that the corresponding presheaf category we are considering must not be too small: they must include presheaves of sufficiently high cardinality relative to the original category.}


\begin{TODOblock}
Clarify the size constraint. Note that it is very common in mathematics to take the relative point of view on Set, in terms of Grothendieck universes or the like, so as to consider the topos $Set^K$ as built up from a bunch of full subtoposes defined by a global cardinality constraint: those presheaves whose cardinality at each object is constrained by an upper bound, and this upper bound is the same at each object. But there is no reason we must only consider such constant upper bounds. We can just as well consider all kinds of varying upper bounds. And by allowing the the upper bounds to vary in the appropriate way, growing sufficiently fast, we get that $Set^K$ is built up from a bunch of full subtoposes which are all introspective theories. It is like a shift of frame of reference, to allow the upper bounds to vary with suitable \quote{slope} instead of having to be constant. But it serves all the same purposes as the very standard move in mathematics, of taking a relative point of view on Set.

Note that while typical categorical arguments work within structural set theory, the above can be done most readily within a material set theory. Furthermore, while typical categorical arguments work within the internal logic of toposes with NNO or some such thing, the above requires us to move beyond this, and is done most readily using the Axiom of Replacement. Thus, ZF or IZF or the like. Specifically, take Set to be a material set theory and a strict lexcategory, and take a cardinality constraint at a node to be a set of sets (corresponding to a full subcategory of Set) satisfying the condition that this full subcategory is closed under finite limits. Then we furthermore impose the condition that the full subcategory at node X contains the small category of all discrete presheaves on < X and all natural transformations between them. Using transfinite induction, we can easily define a function from nodes to sets that has this property.

The reason we must use the Axiom of Replacement is essentially because the initial algebra/transfinite recursion properties of well-founded sets within a mere topos $T$ are only with respect to endomorphisms of the subobject functor (which is representable, and thus such endomorphisms are themselves represented by endomorphisms on $\Omega$, living internally to the category), and not with respect to natural transformations of the self-indexing more generally (which is not representable, and thus its endomorphisms are not given by some internal data). Even simple natural transformations of the self-indexing such as the powerset operation on indexed sets may not admit corresponding catamorphisms defined by induction (e.g., there is in general no slice above the natural numbers in which the fiber of n + 1 is the powerset of the fiber of n).
\end{TODOblock}

\begin{TODOblock}
The above results immediately imply that the theorems of modal logic which hold for all locally introspective theories are no stronger than those which hold for all transitive Kripke frames, and the theorems which hold for all introspective theories or the theorems which hold in all locally Loeb theories are no stronger than those which hold for all transitive converse well-founded Kripke frames. From this, we can readily conclude that the theorems which hold in all locally introspective theories are K4 and the theorems which hold in all introspective theories or the theorems which hold in all locally Loeb theories are GL. Does the last two of these coinciding help us embed every locally introspective theory into an introspective theory, in the same way as we did for the unconstrained vs constrained presheaf models of GL Kripke frames?
\end{TODOblock}

\begin{TODOblock}
Give topos of trees example as well. This is what happens when we take $f$ as the identity functor and $Struct = Disc$ as the free category on some semicategory (in particular, the semicategory of natural numbers with strict reverse ordering). Note that this is an example of an introspective theory in which the functor from the introspective theory to the global aspect of the geminal category is an equivalence of categories (probably an equivalence of geminal categories, even? Thus, what we were calling a GLS-category...). Our $\Box$ operator becomes, on this category, what Birkedal et al call the step operator. This has a left adjoint as well, what Birkedal et al call the constant set operator. It's likely that in general we have left adjoints for these models based on well-founded semicategories.

Actually, many of the things we cite to Birkedal are already anticipated in "Unifying Recursive and Co-recursive Definitions in Sheaf Categories" by Pietro Di Gianantonio Marino Miculan.
\end{TODOblock}

\subsection{Old stuff from geminal categories chapter}
\TODOinline{Everything following in this chapter is about to get thrown out/rewritten}

\begin{TODOblock}
Note that the above means every geminal gadget is the carrier of a coalgebra for a particular endofunctor on geminal gadgets. Those gadgets for which this coalgebra is an isomorphism are of particular note (as related to GLS modal logic and not just GL modal logic). We can also iterate transfinitely and take a colimit (usually just an omega-colimit for finitary notions of gadget), i.e. apply Adamek's construction, to reflect arbitrary geminal gadgets into these GLS geminal gadgets. See the section on well-pointed endofunctors at "transfinite construction of free algebras" on nlab, or "A unified treatment of transfinite constructions for free algebras, free monoids, colimits, associated sheaves, and so on.". Keep in mind that the relevant endofunctor is indeed well-pointed, by the properties of geminal categories (actually, I no longer think this is well-pointed). Keep in mind, this infinitary colimit reflection can be carried out for geminal categories internal to $\Set$, given $\Set$'s sufficient infinitary colimit structure; we do not have a guarantee that a geminal category internal to an arbitrary lexcategory can be reflected into a GLS category.

Actually, none of this is specific to geminal gadgets (models of free introspective theories). It applies to models of any introspective theory. (Although maybe we don't actually have well-pointedness here in general?)

It may be curious to consider in what cases an introspective theory is itself GLS-geminal like so. Many natural examples do have this property (the $\Sigma_1$ introspective theory with internal $\Sigma_1$ C for a sound theory like PA, the topos of trees with step operator, the initial arithmetic universe, etc). These will generally also be "super-introspective theories" in the terminology of the TODO note at the end of this section.
\end{TODOblock}

There are analogues of all the above results where we use finite product theories instead, and talk about enriched structures rather than internal structures. This can be made to work because finite product structure suffices to discuss enriched category structure and even enriched category-with-finite-product structure once the structure of the objects themselves has been fixed. We decline for now to formalize this, as it is a bit off the path of our main interest in introspective theories. \TODOinline{Formalize this, as free locally introspective theories (consider both the finite limit and finite product cases) unify this with the above, show how Kripke-4 categories are the enriched analogue of a geminal cartesian closed category. Note how a geminal lex cartesian closed category always gives rise to such an enriched-geminal cartesian closed category. Discuss the weaker notion of enriched-geminal categories which do not presume cartesian closed structure as well, and note how any geminal category gives rise to such an enriched-geminal category.}

\begin{TODOblock}
Observe that geminal categories differ importantly from introspective theories because we do not have X |- []X for arbitrary objects in a geminal category, like we do in an introspective theory. Observe that we do have Loeb's theorem for representable presheaves in any geminal category, just from the fact that we have it as a claim about $C$ within any introspective theory, even for these objects which do not satisfy X |- []X. And similarly for certain functorial fixed points. (Write this intuition about how geminal categories differ from introspective theories most notably wrt to the X |- []X presumption into the introductory section.)

But a geminal category in itself does not give us the structure to talk about presheaves or functors of a sort not definable for, well, a generic geminal category, and so we do not get Loeb's theorem or fixed points for arbitrary presheaves or functors. (It is worth observing this specific failure with an example.)
\end{TODOblock}

\begin{TODOblock}
Write out that Geminal Ys are the same as Geminal (Geminal Y)s. More to the point, (geminal Ys)-extending-X, for a specific geminal Y structure called X, are the same as geminal (Geminal-Ys-extending-X).

Thus, every specific geminal structure (for one kind of gadget) is an initial geminal structure (for another kind of gadget).

One consequence of this is that every geminal structure indeed arises as the global aspect of some gadget-with-underlying-category C internal to some introspective theory (as it is easy, essentially tautological, to see that the free geminal gadget is the one which arises as the global sections of the introspective theory of geminal gadgets).
\end{TODOblock}

\begin{TODOblock}
Discuss \quote{super-introspective} theories: Introspective theories whose internal category is equipped not just as a geminal category but furthermore as an introspective theory, and satisfying the coherence axiom that for any X, when you internalize the map from X to []X, you get the internal introspective theory's map from (internalization of X) to [](internalization of X). Note that this is a kind of well-pointedness condition.

These are the same as geminal introspective theories such that the two underlying geminal category structures (from being a geminal X and from being an introspective theory) coincide.

An example is given by the first part of \cref{SigmaModelSimple}, before we extend the internal copy to be more than just $\Sigma_1$. When the internal copy is restricted to $\Sigma_1$ formulas, it is not merely geminal but furthermore canonically introspective, in a matching way with the outer introspective structure.
\end{TODOblock}

\TODOinline{Note that if the theory of gadgets is finitely presentable, then so is the theory of geminal gadgets}

\TODOinline{Note that the slice introspective theory construction gives us the free augmentation of an introspective theory with a global element of a particular object}

\TODOinline{Do we have slice geminal categories?}

\TODOinline{Remark on the fact that \Loeb/'s theorem transfers to geminal categories. Thus, any geminal cartesian closed category (such as $Set^|N|$ with Kripke [], or such as the initial topos with NNO) is like a model of guarded recursion with exponentials but without A |- []A. On the other hand, any introspective theory (such as the initial arithmetic universe) is like a model of guarded recursion with A |- []A but without exponentials.)}

\subsection{Automatic consistency results without models as such}
We already know that the theory of geminal categories is an introspective theory. And because every introspective theory is itself a geminal category, we know that the theory of introspective theories only proves $\Box A$ if it furthermore proves $A$.

Finally, we know that every lexcategory can be equipped as a geminal category in a trivial way, by taking its internal geminal category to be trivially $1$, even when the outer lexcategory needn't be trivial. From this, we can conclude that the theory of introspective theories is nontrivial in the sense that it does not prove its internal geminal category to be trivial. Thus, it does not prove $\Box A$ for all $A$. Furthermore, combining this with the previous paragraph, we have the stronger consistency result that for every $n$, the theory of introspective theories does not prove $\Box^n A$ for all $A$.

In this way, simply by consideration of the freeness properties already established in the chapter on geminal categories, we already know the theory of introspective theories to have highly nontrivial content, even without needing to find any models of it \quote{in the wild}.

\TODOinline{Discuss more why the stronger consistency result is really the relevant thing to think about.}

\TODOinline{Maybe remove this section. No one cares about looking at things this way this except me, and we already have explicit models to show consistency.}

\subsection{Locally introspective cartesian closed theories}
\begin{observation}\label{CartesianClosedLocallyIntrosp}
\magicref{TrivialPreIntrosp} can be much further generalized. Here we do so, using a number of observations:
\TODOinline{Move these wherever they actually belong}

Given a lex endofunctor $\Box$ under identity (that is, equipped with a natural transformation $\introN$ from identity to $\Box$) on a lex category $T$, we can automatically extend $\Box$ to a $T$-indexed lex endofunctor under identity on the self-indexing of $T$, taking the action on objects of $\Box_X$ on a slice $f : Y \to X$ above $X$ to be given by applying $\Box$ to $f$ to achieve a slice $\Box f : \Box Y \to \Box X$, then pulling this back along $\introN_Y : X \to \Box X$ to get another slice above $X$. The action on morphisms and the lexness of this construction are straightforward if tedious to show, as are the relevant functoriality and naturality conditions for this $\Box$ to be a well-defined $T$-indexed endofunctor \TODO.

This construction also works replacing lexness throughout by finite product structure and using the simple self-indexing correspondingly.

Furthermore, if $T$ is a cartesian closed category and $\Box$ is a finite product preserving endofunctor on $T$, we can obtain another cartesian closed category with the same objects as $T$ but in which a morphism from $A$ to $B$ is what had originally been a global section of $\Box (A \implies B)$, with the obvious composition structure.

The end result of these observations is that a pre-introspective cartesian closed theory in which $\introF$ is essentially surjective on objects amounts to essentially the same thing as a cartesian closed category $T$, a finite product preserving endofunctor $\Box$ on $T$, and a natural transformation $\introN$ from identity to $\Box$ on $T$. We take our category $C$ to be given by the construction of the last paragraph (taken as $T$-indexed by performing this relative to each aspect of the simple self-indexing of $T$), and we obtain $\introS$ by noting that a morphism from $A$ to $B$ in (any aspect of) $T$ corresponds to a global section of $A \implies B$, which can then be hit with $\Box$ to obtain a global section of $\Box (A \implies B)$. The result is automatically locally introspective.

\TODOinline{Some version of this should apply as well to locally cartesian closed categories, but there's some bother about defining what the objects in the construction from two paragraphs ago should be, when they are given by equalizers in $C$ that don't already exist in $T$.}

However, locally introspective (locally) cartesian closed theories cannot be fully introspective, or even just have the \Loeb/\ property, except in a somewhat degenerate sense. $((\Box A) \implies A) \implies A$ will automatically be inhabited, as we have $(\Box A \implies A) \vdash \Box (\Box A \implies A)$ by $\introN$, which in turn entails $\Box A$ by \Loeb/, and thus $(\Box A) \implies A \vdash A$. When $A$ is thought of as falsehood $0$, this amounts to $\neg \neg \Box 0$, asserting the double-negation of the inconsistency of $C$. In a Boolean context, this forces $C$ to be trivial.

\TODOinline{Write the analogue of this for geminal categories}
\end{observation}

\TODOinline{Perhaps note somewhere that we can readily produce introspective theories or geminal categories without natural numbers objects, since we can produce trivial examples from any lexcategory, and there are lexcategories without natural numbers objects. The trivial examples are trivial, but this suffices to establish that the (nontrivial!) free examples also lack natural numbers objects. Thus, the Goedelian phenomena have nothing fundamentally to do with natural numbers objects.}

\subsection{Old example of the Kripke frame introspective theory on naturals}
\TODOinline{Finish writing out the details on this example. Get rid of the "hopefully" words. Write out a naive version first, without size conditions, then show the obstruction, to motivate the size condition.}

\begin{construction}
The following example takes place in the context of a metatheory such as ZF.

In the following, by a ZF-set, I mean a set in the sense of ZF; that is, an element of the cumulative hierarchy, which comes with a well-defined rank (keep in mind that two bijective ZF-sets may have very different ranks!).

We make use both of the fact that ZF is a material rather than structural set theory (so that ZF-sets come with well-defined ranks), and of the fact that ZF's Axiom of Replacement ensures the existence of the cumulative hierarchy at least as far as (indeed much further than) $V_{\omega^2}$. [Note that the following construction could not be carried out as written in a weaker context such as the internal logic of a topos with natural numbers object, where the cumulative hierarchy needn't go further than $V_{\omega \times 2}$.]

First of all, consider some sequence $W_1, W_2, W_3, \ldots$, indexed by positive integers, where each $W_i$ is a \setsmall/ full sublexcategory of $\Set$, and each $W_j$ can be seen as an internal lexcategory within $W_i$ (that is, $\Mor(W_j)$ is among the objects of $W_i$) for $j < i$.

For example, we can take the positive limit stages of the von Neumann hierarchy, with $W_i = V_{\omega \times i}$ for positive integer $i$. Each of these is a full sublexcategory of $\Set$ (closed under finite limits because ranks of finite limits can be taken as at most finitely greater than the supremum of the ranks of all factors), and each $W_j$ can be seen as an internal lexcategory within $W_i$, for $j < i$.

Now, consider the positive integers both as a poset $P$ and as a discrete category $|P|$. Of course, the latter has an inclusion functor into the former.

We can consider presheaves on $P$, which comprise $\Psh{P}$, and we can consider presheaves on $|P|$, which comprise $\Psh{|P|}$. The inclusion functor $|P| \to P$ gives us a forgetful functor $\Psh{P} \to \Psh{|P|}$. Because finite limits in presheaf categories are computed componentwise, this forgetful functor is a lexfunctor.

Now let us consider a particular full subcatgory of $\Psh{|P|}$. An object of $\Psh{|P|}$ is a sequence of sets $s_1, s_2, s_3, \ldots$. The full subcategory we are interested in is comprised of those objects where each $s_i$ is one of the sets in $W_i$. This is like imposing a smallness constraint, but the sense of \quote{smallness} is not constant but grows ever looser as we go further into the sequence.

This full subcategory of $\Psh{|P|}$ is equivalently the product of $W_i$ over all positive integers $i$. Because the $W_i$ are closed under finite limits, we have that this is indeed a full sublexcategory of $\Psh{|P|}$.

This full sublexcategory of $\Psh{|P|}$ induces as its preimage under the forgetful lexfunctor $\Psh{P} \to \Psh{|P|}$ also a full sublexcategory of $\Psh{P}$. Let us call this $T$. That is, $T$ comprises those presheaves on the positive integers whose $i$-th set is an element of $W_i$.

This is the first piece of the introspective theory we are building here.

Secondly, let us consider a particular internal lexcategory $C$ within $T$. Specifically, the $i$-th component of $C$ is the product of the lexcategories $W_j$ over all $j < i$. As for the action of the presheaf as we go from higher-indexed components to lower-indexed components, we simply project away the no longer needed factors.

Hopefully it is clear what I mean by this and clear that it does indeed define a lexcategory $C$ internal to $T$. (In particular, all the lexcategorical structure commutes appropriately with the presheaf actions because all the lexcategorical structure is defined componentwise on these products and the presheaf actions just project away components.)

What's more, hopefully it is clear that the global aspect of $C$ is precisely the product of $W_i$ over all positive integers $i$. This is precisely the full sublexcategory of $\Psh{|P|}$ which $T$ maps into under our aforementioned forgetful lexfunctor. Thus, said forgetful functor acts as a lexfunctor $\introS$ from $T$ into the global aspect of $C$.

Under this correspondence, it is hopefully also clear that given an object $c$ in the global aspect of $C$, which can be viewed as a sequence of sets $s_1, s_2, s_3, \ldots$ with $s_i$ in $W_i$, the corresponding object $\Hom_C(1, c)$ in $T$ is such that its $i$-th set is the product of $s_j$ over $j < i$, with presheaf action again given by projecting away unneeded factors.

Thus, the natural transformation $\introN$ that we need to make this an introspective theory amounts to the following: Its component at any object of $T$ given by sets $s_1, s_2, s_3, \ldots$, should have an $i$-th component which is a function from $s_i$ to the product of $s_j$ over all $j < i$. We obtain this function just from the presheaf action for the given object of $T$, and observe that this does indeed satisfy the appropriate properties to comprise a morphism in $T$. For the naturality of this transformation, we need to know that any morphism in $T$ commutes appropriately with these presheaf actions, and indeed it will by the definition of morphisms in $T$.

Thus, $\langle T, C, \introS, \introN \rangle$ comprises an introspective theory.
\end{construction}
\fileend