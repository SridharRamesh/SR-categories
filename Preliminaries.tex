\section{Category-theoretic preliminaries}

\subsection{Higher categorical terminology pedantry}
We speak in the following frequently of category-valued presheaves (i.e., contravariant functors into the category of categories) and natural transformations between these. Technically, what we mean by these are not \quote{functors} and \quote{natural transformations} in the traditional sense, but what some call "pseudofunctors" and \quote{pseudonatural transformations}, or \quote{2-functors} and \quote{2-natural transformations}, as the category of categories should be viewed as a 2-category, lacking a notion of equality and only having a notion of isomorphism between its 1-cells. That is, wherever one might traditionally ask for an (automatically coherent) system of equalities, this is replaced by a coherent system of isomorphisms. We take the convention that this is what terminology such as \quote{functor} and \quote{natural transformation} already means, in such a context. But we will try our best to construct arguments in such a way as that this is mostly not a bother that needs to be explicitly worried about.

Similarly, if we ever describe diagrams involving functors between categories as commuting, we really mean that these diagrams commute up to natural isomorphism. If we make claims about uniqueness in such a context, we mean the space of choices is contractible up to the relevant isomorphisms. And so on. Again, our convention is that this is what such terminology already means, in any categorical context where one has such concepts of isomorphism around, unless we have taken care to say we are working with stricter notions instead (see more on strictness below).

\subsection{Indexed, \repsmall/, and locally \repsmall/ structures}
We assume familiarity with sets, functions, categories, functors, categories having finite limits (i.e., lexcategories), functors preserving finite limits (i.e., lexfunctors), natural transformations, presheaves, etc, all in the ordinary sense.

Let $T$ be an arbitrary category. By a \definedManualIndexSort{$T$-indexed set}{T-indexed set}, we mean a presheaf on $T$; that is, a contravariant functor from $T$ to $\Set$. By a \defined{function} or \defined{map} or any such thing between $T$-indexed sets, we mean a natural transformation between the corresponding presheaves.

The category of $T$-indexed sets and maps between them is thus the presheaf category $\Set^{\op{T}}$. We may also refer to this as $\Psh{T}$. \TODOinline{Some comment about how we will never talk about this in contexts where we do not intend for $T$ be to considered \repsmall/ relative to $\Set$. If we speak of $\Psh{T}$ for some $T$ which is large, then we really mean by $\Psh{T}$ the category $LargeSets^{\op{T}}$, and so on. If we clarify this up front, it will save us some tedious bother, it will save us from having to explicitly say all the time things such as \quote{$T$ is set-sized} whenever we talk about Kan extensions existing, blah blah.}

We say an indexed set is \defined{\repsmall/} (or \definedManualIndexSort{$T$-\repsmall/}{T-\repsmall/}, when we wish to emphasize which indexing category we are talking about) if the corresponding presheaf is representable. \TODOinline{I am in the middle of changing instances of "small" in this document to "\repsmall/". They have not all changed yet, so you will see the word \quote{small} still used in much of the document to mean \repsmall/.}

Via the Yoneda embedding, we identify $T$ itself as the full subcategory of \repsmall/ $T$-indexed sets within the category of all $T$-indexed sets, such that we may speak, for example, of functions from objects of $T$ to $T$-indexed sets. That is, when $t$ is an object of $T$, we will readily write $t$ also to mean the Yoneda embedding of $t$, when we wish to treat it as a \repsmall/ $T$-indexed set; we will generally not explicitly write $y(t)$ or any such thing.

Note that \repsmall/ sets are closed under any limits which exist in $T$; in particular, if $T$ is a lexcategory, \repsmall/ sets are closed under finite limits.

(It is perhaps a bit misleading to use \quote{small}-derived terminology here, as this notion is not closed under subobjects. Indeed, what might be considered the smallest indexed set, the one which constantly takes the value of the empty set, is never \repsmall/ in this technical representability sense. But the analogy to the familiar distinction by between \quote{small} sets and proper classes is often a fruitful one, and so we stick with this terminology all the same for now. When the indexing category $T$ has finite limits (or even just splittings of idempotents), this notion of \repsmall/ is equivalent to the standard notion \quote{tiny}; see \url{https://ncatlab.org/nlab/show/tiny+object#in_presheaf_categories}.)

Note that given an arbitrary functor $f : S \to T$, this induces by composition a functor $\pullAlong{f}$ from $T$-indexed sets to $S$-indexed sets. If $f$ has a right adjoint $g$, then $\pullAlong{f}$ takes \repsmall/ sets to \repsmall/ sets. For $\pullAlong(f)$ takes any representable presheaf with representing object $t$ in $T$ to the representable presheaf $\Hom_T(f(-), t) = \Hom_S(-, g(t))$.

When $T$ is a lexcategory (or even just a category with pullbacks), we may also define more generally the concept of a function $f : A \to B$ between $T$-indexed sets having \defined{\repsmall/ fibers}: This is defined as the pullback of $f$ along any map into $B$ from a \repsmall/ set being itself \repsmall/. That is, in any pullback diagram of the following sort within the category of $T$-indexed sets, if $t$ is \repsmall/, then so is $s$.

\[\begin{tikzcd}
	s & A \\
	t & B
	\arrow["f", from=1-2, to=2-2]
	\arrow[from=2-1, to=2-2]
	\arrow[from=1-1, to=2-1]
	\arrow[from=1-1, to=1-2]
	\arrow["\lrcorner"{anchor=center, pos=0.125}, draw=none, from=1-1, to=2-2]
\end{tikzcd}\]

(The reader may wonder why we restricted ourselves to only talking about $T$-indexed functions having \repsmall/ fibers in cases where $T$ has pullbacks, even though pullbacks in $T$ were not actually used in our definition. The reason is that, when $T$ does not have pullbacks, this definition does not have the expected properties. In particular, we want that any pullback of a function with \repsmall/ fibers should itself have \repsmall/ fibers, which would not be true if $T$ itself did not have pullbacks.)

We can talk about any kind of $T$-indexed structure or $T$-indexed maps between such structures, as the appropriate diagram of $T$-indexed sets and functions; e.g., $T$-indexed groups and group homomorphisms between them. When the $T$-indexed sets involved (the sorts within the structure, including the domains and codomains of all the maps within the structure) are all \repsmall/, we say the entire structure is \defined{\repsmall/}, or equivalently, we say it is \defined{internal} to $T$\footnote{This \quote{$T$-internal whatever} terminology makes most sense when $T$ is thought of as a kind of structure such that structure-preserving maps from $T$ to $S$ take $T$-internal whatevers to $S$-internal whatevers. Thus, if the definition of whatevers invokes maps whose domains are defined using finite limits, we will use this terminology of $T$-internal whatevers only in contexts where we are taking $T$ as a category with finite limits (for example, when speaking of internal categories). If the definiton of whatevers invokes maps whose domains are defined using finite products, we will use this terminology of $T$-internal whatevers only in contexts where we are taking $T$ as a category with finite products (for example, when speaking of internal groups). If the definition of whatevers invokes maps whose domains are defined using countably infinite products, then to speak of $T$-internal whatevers, $T$ must be carrying countably infinite product structure, etc.}. By the Yoneda lemma, this amounts to a diagram of objects and morphisms within $T$ itself.

Note that any functor of the form $\pullAlong{f}$ preserves all limits \footnote{This can be seen in two ways. Perhaps more directly, this can be seen from the fact that (co)limits in a a functor category are computed pointwise where the pointwise (co)limits exist. Secondly, it can be seen from the fact that $\pullAlong{f}$ has left and right adjoints, known as left and right Kan extension. \TODOinline{There are some size issues with when Kan extension exists, should we discuss those?}}, and thus it also acts as a functor from $T$-indexed structures to $S$-indexed structures more generally, for any notion of structure definable using limits; e.g., $\pullAlong{f}$ takes $T$-indexed groups to $S$-indexed groups, and so on. Again, if $f$ has a right adjoint, then $\pullAlong{f}$ will take \repsmall/ structures to \repsmall/ structures.

In the same vein as all this, by a \definedManualIndexSort{$T$-indexed category}{T-indexed category}, we mean a category-valued presheaf on $T$; that is, a contravariant functor from $T$ to $\Cat$, and by a \defined{functor} between $T$-indexed categories, we mean a natural transformation between such presheaves.\footnote{The machinery of indexed categories is equivalent to the machinery of fibered categories, a presentation some prefer, but we refrain from that presentation for now.}. (In keeping with our convention from above, note that \quote{functor} and \quote{natural transformation} here really refer to pseudofunctors and pseudonatural transformations, respectively, as $\Cat$ is a 2-category). We say this indexed category is an \defined{indexed lexcategory} (aka, \defined{has finite limits}) if this presheaf factors through the inclusion of $\LexCat$ into $\Cat$; that is, if it takes every object to a lexcategory and every morphism to a lexfunctor. We say a functor between indexed lexcategories \defined{preserves finite limits} if it arises from a natural transformation between the corresponding $\LexCat$-valued presheaves. And in the same way as all this, we can speak of \defined{natural transformations} between functors between indexed categories, or any other familiar categorical structure or property.

Note that, from any lexcategory $T$ (or even just a category with pullbacks), we obtain a $T$-indexed lexcategory by considering the functor $T/-$ which assigns to each object $t$ of $T$ the slice category $T/t$, and whose action on morphisms is given by pullback. We refer to this as the \defined{self-indexing} of $T$.

In the same way, we can also speak of an \defined{indexed category with finite products}, and indeed, from any category with finite products $T$ (or even just a category with binary products), we obtain a $T$-indexed category with finite products by considering the functor $T//-$ which assigns to each object $t$ of $T$ the full subcategory of $T/t$ consisting of projection slices (slices given by the projection $: t \times s \to t$ for some object $s$ of $T$), and whose action on morphisms is given by pullback. We refer to this as the \defined{simple self-indexing} of $T$. Note that $T//t$ can also be thought of as the Kleisli category for the $t \times -$ comonad; that is, the objects of $T//t$ are the same as the objects of $T$, while a morphism $: s_1 \to s_2$ in $T//t$ is the same as a morphism $: t \times s_1 \to s_2$ in $T$, with suitable composition structure.

We now might like to speak about a category being \repsmall/, in the sense that its collection of objects and collection of morphisms are \repsmall/, but there is one nit to be aware of here. We generally speak about categories in such a way as that they do not have come with a particular notion of their set of objects, as such. That is, two categories may be considered equivalent though presented with different ostensible sets of objects. For example, a category comprised of one terminal object, or a category comprised of two terminal objects, are to be considered equivalent categories. So to speak about categories as having a set of objects, we must imagine them as carrying more fine-grained equality structure than we normally do.

Specifically, let us say a \defined{strict category} is a set of objects (including the ability to speak about equality of objects in a potentially finer-grained sense than isomorphism) and a set of morphisms, with the usual operations and satisfying the usual equations. \TODOinline{Word this distinction between ordinary categories and strict categories better. Address the ex/lex issues around allowing or disallowing sets of 2-cells as well.} We may also speak of a \defined{strict functor}, meaning a homomorphism of such structure that preserves all of it on-the-nose, and so on for every other categorical notion.

Of particular note is the case of a \defined{strict lexcategory}. Here, we mean more than just that the objects carry equality structure in themselves. We also mean that, when taking special basis limits, the relevant limit is not merely defined up to isomorphism, but is given as a particular object (in keeping with the fact that objects can be distinguished more finely-grained than isomorphism, within a strict category). A \defined{strict lexfunctor} is accordingly one which preserves these chosen basis on limits not merely up to isomorphism, but on-the-nose. \TODOinline{Write more about a basis of basic finite limit shapes, having chosen limits for this basis, and strict lexfunctors going beyond mere strict functors in preserving chosen basis limits on the nose. Empashize how an indexed lexcategory simply needs reindexing to preserve lex limits up to isomorphism, but an indexed strict lexcategory requires basic limits to be preserved on the nose. We will later see that when they are \repsmall/, every instance of the former is equivalent to an instance of the latter.}

Every strict category [or functor or etc], gives rise to a category [or functor or etc] in whatever ordinary sense one would like to think of these. And conversely, one would ordinarily say every category is equivalent to \emph{some} strict category.\footnote{The situation is more nuanced for turning functors between arbitrary categories equivalent to given strict categories into strict functors between the given strict categories, but that will not concern us for now.} Of course, we can speak of \defined{indexed strict categories} now, as the appropriate diagram of indexed sets and functions between them, and can speak of such indexed strict categories as being \repsmall/, just in case their indexed sets of objects and of morphisms are all \repsmall/.

We also say an indexed strict category is \defined{locally \repsmall/} if the map from its set of morphisms to the pair of their domain and codomain has \repsmall/ fibers (in other words, though its set of objects may not be \repsmall/, everything that exists between any two particular objects is \repsmall/). Note that a \repsmall/ strict category is a fortiori locally \repsmall/, as expected, as the collection of morphisms between any particular pair of objects are given by an equalizer between sets already presumed \repsmall/ in a \repsmall/ strict category.

We will now say an indexed category is \defined{\repsmall/} or \defined{locally \repsmall/} if it is equivalent to some indexed strict category which is \repsmall/ or locally \repsmall/, respectively. Note that we do not demand that, as part of its structure, any particular such strict category is selected; merely, that it is possible to do so. However, we may use the terminology \defined{internal category}, to mean the selection of a specific \repsmall/ indexed strict category; similarly, an \defined{internal lexcategory} will mean the selection of a specific \repsmall/ indexed strict lexcategory (including chosen basic limits), and so on. \TODOinline{Observe that any indexed lexcategory which is \repsmall/ as an indexed category is equivalent to some \repsmall/ indexed strict lexcategory, even though an indexed lexcategory only demands reindexing preserve limits up to isomorphism while an indexed strict lexcategory demands reindexing preserve them on-the-nose}.

The self-indexing $T/-$ of a lexcategory $T$ is not in general \repsmall/, nor even locally \repsmall/. Given two globally defined objects $A$ and $B$ of the self-indexed category, their corresponding hom-set $\Hom_{T/-}(A, B)$ amounts to the presheaf $\Hom_{T}(A \times -, B)$ on $T$, which is to say, the exponential $B^A$ within the presheaves over $T$. This indexed set is \repsmall/ just in case an exponential object $B^A$ already exists within $T$. This extends in the same way to non-globally-defined objects of the self-indexed category (considered as globally defined over some slice category of $T$ instead), and so the self-indexing of $T$ is locally \repsmall/ just in case $T$ is locally cartesian closed. Even if we do not have local cartesian closure in full, note that when $A = 1$, the exponential $B^A$ always is given by $B$ itself, so that hom-sets whose domain is $1$ are always \repsmall/ within the self-indexed category, with $\Hom_{T/-}(1, B)$ being the same as $B$ itself. In this way, the global sections presheaf upon the self-indexed category yields the canonical equivalence between the self-indexed category and the category of \repsmall/ sets.

As a final bit of terminology, given any kind of indexed data $P$, indexed over a category $T$ with a terminal object, we may refer to the data of this presheaf at that terminal object as its \defined{global aspect}. By the Yoneda lemma, this global aspect data $P(1)$ is the same as the data of a map from the terminal object $1$ to $P$, which is the same as the data of a map from the constantly $1$ presheaf to $P$. This is also the same as the data of the limit of $P$, thought of a $\op{T}$-indexed diagram. Thus, even if a category does not have a terminal object, we may still speak of the global aspect of presheaves over that category, and thus of indexed structures more generally (which are given by presheaves and maps between them).

\TODOinline{Define "global" and "aspect" more generally, more explicitly}

More generally, we may refer to the data of a presheaf at any object $t$ of the category over which it is indexed as its data \defined{defined over $t$}, or which is \definedManualIndexSort{$t$-indexed}{t-indexed}. Note that data defined over $t$ is automatically transferred to corresponding data defined over $s$ by any morphism from $s$ to $t$ in $T$, by the action of the presheaf. In contexts where it would cause no confusion to speak in this way, we use the same name of the data over $t$ again for the corresponding data over $s$, especially when $t$ is the terminal object. \TODOinline{Do we actually do this often?}

\subsection{Double or multiple indexing}
Suppose $T$ is some category and $C$ is some category indexed over $T$. What does it mean to speak of a $T$-indexed $C$-indexed structure? For example, a $T$-indexed $C$-indexed set. That is, a $T$-indexed $C$-indexed presheaf $P$.

What this means is that, for every object $t$ in $T$ and every $t$-defined object $c$ in $C$, we have some corresponding set of $P$ (the $t$-defined $c$-defined elements of $P$), and we also have a coherent system of pullback maps between these: Along any map $f : s \to t$ in $T$, we can pull back a $t$-defined $c$-defined element of $P$ to an $s$-defined $c$-defined element of $P$ (where the latter $c$ is implicitly the pullback along $f$ of the former $c$). And for any fixed $t$, given a $t$-defined map $g : d \to c$ in $C$, we can pull back a $t$-defined $c$-defined element of $P$ along this to a $t$-defined $d$-defined element of $P$. Both of these systems of pullbacks are functorial, and they also interact with each other \quote{commutatively} in the sense that pulling back along a map $g$ in $C$ and then pulling back along a map $f$ in $T$ is the same as pulling back along the map $f$ in $T$ and then pulling back along the map $g$ in $C$ (where, again, the latter, $g$ is implicitly the pullback along $f$ of the former $g$).

This all amounts to saying that $P$ is in fact indexed over the Grothendieck construction corresponding to $C$. We shall say $P$ is $(T, C)$-indexed.

What about maps between such doubly-indexed sets? Well, this is the same as the notion we get again by thinking of these as in fact singly-indexed over the Grothendieck construction. A natural transformation in that context.

Now that we understand doubly-indexed sets and maps between them, we can also understand doubly-indexed structures in general. Including doubly-indexed strict categories, and everything about doubly-indexed categorical structures works in basically the same fashion.

This all extends in the same way to triple indexing and so on. Given a $(T, C)$-indexed category $D$, we we have that $D$ is indexed over the Grothendieck construction corresponding to $C$, and thus there is also a further category given by the Grothendieck construction corresponding to $D$. Structures indexed over this last construction, we may refer to as $(T, C, D)$-indexed. If we write $(T, C)$ for the Grothendieck construction corresponding to $C$, a $(T, C, D)$-category is the same as a $((T, C), D)$-indexed category, and also can be interpreted as a $(T, (C, D))$-category for a suitable $T$-indexed category $(C, D)$. This amounts to structures which can be reindexed across morphisms in $T$, or  morphisms in $C$, or morphisms in $D$, all in a coherent way.

\TODOinline{Discuss the concept of being $T$-\repsmall/ vs. $C$-\repsmall/ when $(T, C)$-indexed}

Note also that any structure singly-indexed over $T$ can automatically be thought of as doubly-indexed over $T$ and $C$, where the indexing over $C$ is trivial. This is basically by the fact that the Grothendieck construction for $T$ and $C$ comes with a projection functor to $T$, so that all $T$-indexed structures thus induce, via this functor, a $T$-and-$C$-indexed structure. Thus, we can readily speak of maps between $T$-indexed structures and $(T, C)$-indexed structures, by treating the former as implicitly $(T, C)$-indexed themselves.

Indeed, more generally in the multiply indexed context, any structure indexed over some prefix of a string of categories is automatically indexed over the full string of categories. And in the same way, this allows us to speak of maps between structures indexed by different strings of categories. This is the main reason for us to bring all this up, just so that we can speak of maps between structures at different levels of indexing.

(Keep in mind also that an honest-to-goodness actual structure, living in $\Set$, is like the zero-ary case of indexing; it's indexed by the empty string of categories $()$, but can be seen in a trivial way as $T$-indexed for any category $T$).

Note that a map from a $T$-indexed structure $A$ to a $(T, C)$-indexed structure $B$ thus amounts to a map from $A$ to $\Hom_C(1, B)$, whenever $C$ has a terminal object. So all this high-faluting multiply indexed stuff just amounts to another way of thinking about maps into global aspects.
