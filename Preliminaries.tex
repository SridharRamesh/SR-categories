\section{Preliminaries}

\subsection{Terminology pedantry}
We speak in the following frequently of category-valued presheaves (i.e., contravariant functors into the category of categories) and natural transformations between these. Technically, what we mean by these are not \quote{functors} and \quote{natural transformations} in the traditional sense, but what some call "pseudofunctors" and \quote{pseudonatural transformations}, or \quote{2-functors} and \quote{2-natural transformations}, as the category of categories should be viewed as a 2-category, lacking a notion of equality and only having a notion of isomorphism between its 1-cells. That is, wherever one might traditionally ask for an (automatically coherent) system of equalities, this is replaced by a coherent system of isomorphisms. We take the convention that this is what terminology such as \quote{functor} and \quote{natural transformation} already means, in such a context. But we will try our best to construct arguments in such a way as that this is mostly not a bother that needs to be explicitly worried about.

\subsection{Indexed, small, and locally small structures}
We assume familiarity with sets, functions, categories, functors, categories having finite limits (i.e., lexcategories), functors preserving finite limits (i.e., lexfunctors), natural transformations, presheaves, etc, all in the ordinary sense.

Let $T$ be an arbitrary category. By a \definedManualIndexSort{$T$-indexed set}{T-indexed set}, we mean a presheaf on $T$; that is, a contravariant functor from $T$ to $\Set$. By a \defined{function} or \defined{map} or any such thing between $T$-indexed sets, we mean a natural transformation between the corresponding presheaves.

We say an indexed set is \defined{small} (or \definedManualIndexSort{$T$-small}{T-small}, when we wish to emphasize which indexing category we are talking about) if the corresponding presheaf is representable. Via the Yoneda embedding, we identify $T$ itself as the full subcategory of small $T$-indexed sets within the category of all $T$-indexed sets, such that we may speak, for example, of functions from objects of $T$ to $T$-indexed sets. Note that small sets are closed under any limits which exist in $T$; in particular, if $T$ is a lexcategory, small sets are closed under finite limits.

(It is perhaps a bit misleading to use the terminology \quote{small} here, as this notion is not closed under subobjects, and indeed, what might be considered the smallest indexed set, the one which constantly takes the value of the empty set, is never small in this technical representability sense. But the analogy to the familiar distinction between sets and proper classes is often a fruitful one, and so we stick with this terminology all the same.)

When $T$ is a lexcategory, we may also define more generally the concept of a function $f : A \to B$ between $T$-indexed sets having \defined{small fibers}: This is defined as every fiber of $f$ over every $t$-indexed element of $B$ being a representable presheaf over $T/t$.

\begin{TODOblock}
Make sure this is the right definition of small fibers and word it the best way. The definition can equally be given as $f$ being the pullback of the slice of global sections of the self-indexing above the self-indexing (though what we mean by pullback here is a pullback of a discrete fibration along a function, which is technically slightly distinct from a pullback of functions. Whatever.).
\end{TODOblock}

We can talk about any kind of $T$-indexed structure or $T$-indexed maps between such structures, as the appropriate diagram of $T$-indexed sets and functions; e.g., $T$-indexed groups and group homomorphisms between them. When the $T$-indexed sets involved (the sorts within the structure, including the domains and codomains of all the maps within the structure) are all small, we say the entire structure is \defined{small}, or equivalently, we say it is \defined{internal} to $T$. By the Yoneda lemma, this amounts to a diagram of objects and morphisms within $T$ itself.

In the same vein as all this, by a \definedManualIndexSort{$T$-indexed category}{T-indexed category}, we mean a category-valued presheaf on $T$; that is, a contravariant functor from $T$ to $\Cat$, and by a \defined{functor} between $T$-indexed categories, we mean a natural transformation between such presheaves.\footnote{The machinery of indexed categories is equivalent to the machinery of fibered categories, a presentation some prefer, but we refrain from that presentation for now.} We say this indexed category is an \defined{indexed lexcategory} (aka, \defined{has finite limits}) if this presheaf factors through the inclusion of $\LexCat$ into $\Cat$; that is, if it takes every object to a lexcategory and every morphism to a lexfunctor. We say a functor between indexed categories \defined{preserves finite limits} if it arises from a natural transformation between the corresponding $\LexCat$-valued presheaves. And in the same way as all this, we can speak of \defined{natural transformations} between functors between indexed categories, or any other familiar categorical structure or property.

Note that, from any lexcategory $T$, we obtain a $T$-indexed lexcategory by considering the functor $T/-$ which assigns to each object $t$ of $T$ the slice category $T/t$, and whose action on morphisms is given by pullback. We refer to this as the \defined{self-indexing} of $T$.

We now might like to speak about a category being small, in the sense that its collection of objects and collection of morphisms are small, but there is one nit to be aware of here. We generally speak about categories in such a way as that they do not have come with a particular notion of their set of objects, as such. That is, two categories may be considered equivalent though presented with different ostensible sets of objects. For example, a category comprised of one terminal object, or a category comprised of two terminal objects, are to be considered equivalent categories. So to speak about categories as having a set of objects, we must imagine them as carrying more fine-grained equality structure than we normally do.

Specifically, let us say a \defined{strict category} is a set of objects (including the ability to speak about equality of objects in a potentially finer-grained sense than isomorphism) and a set of morphisms, with the usual operations and satisfying the usual equations. \TODOinline{Word this distinction between ordinary categories and strict categories better. Address the ex/lex issues around allowing or disallowing sets of 2-cells as well.} We may also speak of a \defined{strict functor}, meaning a homomorphism of such structure that preserves all of it on-the-nose, and so on for every other categorical notion.

Of particular note is the case of a \defined{strict lexcategory}. Here, we mean more than just that the objects carry equality structure in themselves. We also mean that, when taking special basis limits, the relevant limit is not merely defined up to isomorphism, but is given as a particular object (in keeping with the fact that objects can be distinguished more finely-grained than isomorphism, within a strict category). A \defined{strict lexfunctor} is accordingly one which preserves these chosen basis on limits not merely up to isomorphism, but on-the-nose. \TODOinline{Write more about a basis of basic finite limit shapes, having chosen limits for this basis, and strict lexfunctors going beyond mere strict functors in preserving chosen basis limits on the nose. Empashize how an indexed lexcategory simply needs reindexing to preserve lex limits up to isomorphism, but an indexed strict lexcategory requires basic limits to be preserved on the nose. We will later see that when they are small, every instance of the former is equivalent to an instance of the latter.}

Every strict category [or functor or etc], gives rise to a category [or functor or etc] in whatever ordinary sense one would like to think of these. And conversely, one would ordinarily say every category is equivalent to \emph{some} strict category.\footnote{The situation is more nuanced for turning functors between arbitrary categories equivalent to given strict categories into strict functors between the given strict categories, but that will not concern us for now.} Of course, we can speak of \defined{indexed strict categories} now, as the appropriate diagram of indexed sets and functions between them, and can speak of such indexed strict categories as being small, just in case their indexed sets of objects and of morphisms are all small.

We also say an indexed strict category is \defined{locally small} if the map from its set of morphisms to the pair of their domain and codomain has small fibers (in other words, though its set of objects may not be small, everything that exists between any two particular objects is small). Note that a small strict category is a fortiori locally small, as expected, as the collection of morphisms between any particular pair of objects are given by an equalizer between sets already presumed small in a small strict category.

We will now say an indexed category is \defined{small} or \defined{locally small} if it is equivalent to some indexed strict category which is small or locally small, respectively. Note that we do not demand that, as part of its structure, any particular such strict category is selected; merely, that it is possible to do so. However, we may use the terminology \defined{internal category}, to mean the selection of a specific small indexed strict category; similarly, an \defined{internal lexcategory} will mean the selection of a specific small indexed strict lexcategory (including chosen basic limits), and so on. \TODOinline{Observe that any indexed lexcategory which is small as an indexed category is equivalent to some small indexed strict lexcategory, even though an indexed lexcategory only demands reindexing preserve limits up to isomorphism while an indexed strict lexcategory demands reindexing preserve them on-the-nose}.

The self-indexing $T/-$ of a lexcategory $T$ is not in general small, nor even locally small. Given two globally defined objects $A$ and $B$ of the self-indexed category, their corresponding hom-set $\Hom_{T/-}(A, B)$ amounts to the presheaf $\Hom_{T}(A \times -, B)$ on $T$, which is to say, the exponential $B^A$ within the presheaves over $T$. This indexed set is small just in case an exponential object $B^A$ already exists within $T$. This extends in the same way to non-globally-defined objects of the self-indexed category (considered as globally defined over some slice category of $T$ instead), and so the self-indexing of $T$ is locally small just in case $T$ is locally cartesian closed. Even if we do not have local cartesian closure in full, note that when $A = 1$, the exponential $B^A$ always is given by $B$ itself, so that hom-sets whose domain is $1$ are always small within the self-indexed category, with $\Hom_{T/-}(1, B)$ being the same as $B$ itself. In this way, the global sections presheaf upon the self-indexed category yields the canonical equivalence between the self-indexed category and the category of small sets.

As a final bit of terminology, given any kind of indexed data $P$, indexed over a category $T$ with a terminal object, we may refer to the data of this presheaf at that terminal object as its \defined{global aspect}. By the Yoneda lemma, this global aspect data $P(1)$ is the same as the data of a map from the terminal object $1$ to $P$, which is the same as the data of a map from the constantly $1$ presheaf to $P$. This is also the same as the data of the limit of $P$, thought of a $\op{T}$-indexed diagram. Thus, even if a category does not have a terminal object, we may still speak of the global aspect of presheaves over that category, and thus of indexed structures more generally (which are given by presheaves and maps between them).

More generally, we may refer to the data of a presheaf at any object $t$ of the category over which it is indexed as its data \defined{defined over $t$}, or which is \definedManualIndexSort{$t$-indexed}{t-indexed}. Note that data defined over $t$ is automatically transferred to corresponding data defined over $s$ by any morphism from $s$ to $t$ in $T$, by the action of the presheaf. In contexts where it would cause no confusion to speak in this way, we use the same name of the data over $t$ again for the corresponding data over $s$, especially when $t$ is the terminal object. \TODOinline{Do we actually do this often?}

\subsection{The basics of double indexing}
Suppose $T$ is some category and $C$ is some category indexed over $T$. What does it mean to speak of a $T$-indexed $C$-indexed structure? For example, a $T$-indexed $C$-indexed set. That is, a $T$-indexed $C$-indexed presheaf $P$.

What this means is that, for every object $t$ in $T$ and every $t$-defined object $c$ in $C$, we have some corresponding set of $P$ (the $t$-defined $c$-defined elements of $P$), and we also have a coherent system of pullback maps between these: Along any map $f : s \to t$ in $T$, we can pull back a $t$-defined $c$-defined element of $P$ to an $s$-defined $c$-defined element of $P$ (where the latter $c$ is implicitly the pullback along $f$ of the former $c$). And for any fixed $t$, given a $t$-defined map $g : d \to c$ in $C$, we can pull back a $t$-defined $c$-defined element of $P$ along this to a $t$-defined $d$-defined element of $P$. Both of these systems of pullbacks are functorial, and they also interact with each other \quote{commutatively} in the sense that pulling back along a map $g$ in $C$ and then pulling back along a map $f$ in $T$ is the same as pulling back along the map $f$ in $T$ and then pulling back along the map $g$ in $C$ (where, again, the latter, $g$ is implicitly the pullback along $f$ of the former $g$).

This all amounts to saying that $P$ is in fact indexed over the Grothendieck construction corresponding to $C$. We shall say $P$ is $(T, C)$-indexed.

What about maps between such doubly-indexed sets? Well, this is the same as the notion we get again by thinking of these as in fact singly-indexed over the Grothendieck construction. A natural transformation in that context.

Now that we understand doubly-indexed sets and maps between them, we can also understand doubly-indexed structures in general. Including doubly-indexed strict categories, and everything about doubly-indexed categorical structures works in basically the same fashion.

This all extends in the same way to triple indexing and so on. Given a $(T, C)$-indexed category $D$, we we have that $D$ is indexed over the Grothendieck construction corresponding to $C$, and thus there is also a further category given by the Grothendieck construction corresponding to $D$. Structures indexed over this last construction, we may refer to as $(T, C, D)$-indexed. If we write $(T, C)$ for the Grothendieck construction corresponding to $C$, a $(T, C, D)$-category is the same as a $((T, C), D)$-indexed category, and also can be interpreted as a $(T, (C, D))$-category for a suitable $T$-indexed category $(C, D)$. This amounts to structures which can be reindexed across morphisms in $T$, or  morphisms in $C$, or morphisms in $D$, all in a coherent way.

\TODOinline{Discuss the concept of being $T$-small vs. $C$-small when $(T, C)$-indexed}

Note also that any structure singly-indexed over $T$ can automatically be thought of as doubly-indexed over $T$ and $C$, where the indexing over $C$ is trivial. This is basically by the fact that the Grothendieck construction for $T$ and $C$ comes with a projection functor to $T$, so that all $T$-indexed structures thus induce, via this functor, a $T$-and-$C$-indexed structure. Thus, we can readily speak of maps between $T$-indexed structures and $(T, C)$-indexed structures, by treating the former as implicitly $(T, C)$-indexed themselves.

Indeed, more generally in the multiply indexed context, any structure indexed over some prefix of a string of categories is automatically indexed over the full string of categories. And in the same way, this allows us to speak of maps between structures indexed by different strings of categories. This is the main reason for us to bring all this up, just so that we can speak of maps between structures at different levels of indexing.

(Keep in mind also that an honest-to-goodness actual structure, living in $\Set$, is like the zero-ary case of indexing; it's indexed by the empty string of categories $()$, but can be seen in a trivial way as $T$-indexed for any category $T$).

Note that a map from a $T$-indexed structure $A$ to a $(T, C)$-indexed structure $B$ thus amounts to a map from $A$ to $\Hom_C(1, B)$, whenever $C$ has a terminal object. So all this high-faluting multiply indexed stuff just amounts to another way of thinking about maps into global aspects.

\TODOinline{Word all this better}