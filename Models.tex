\filestart

\section{Examples in the wild}

\subsection{Preview}
In previous chapters, we have defined introspective theories and geminal categories. That is, we have axiomatized the theory of introspective theories and the theory of geminal categories. Now we look at some notable models of these axiomatic theories, which is to say, at some notable specific examples of introspective theories and of geminal categories. These examples are of a sort which might be considered to have been found \quote{in the wild}, instead of being freely syntactically constructed as the examples of the last chapter were.

There are two broad classes of models/examples of note in this chapter:

Firstly, there are those which are similar in flavor to the traditional instances of \Goedel/ian phenomena studied in logic. These are based on logical theories which have some internal ability to discuss themselves, such as Peano Arithmetic, or higher-order intuitionistic logic, or the like. Here, it has long been recognized that \Goedel/ian phenomena arise at the propositional level, but the full phenomenon of guarded recursion which we proved for introspective theories in \TODO in has not been noted in these contexts before. We also give an example of a model of this sort which goes well beyond computability or even countability, thus beyond many traditional approaches to presenting the \Goedel/ian phenomena in logic.

The second class of models/examples we consider are based on presheaves over categories with a suitably well-founded subset of morphisms. Here, the existence of guarded recursion is straightforward, but it is the unification with our general theory which is of note. Among these models are examples like step-indexing in the topos of trees, the canonical model discussed in the literature on guarded recursion. Distinct from this are also models which capture the traditional interpretation of GL modal logic in well-founded transitive Kripke frames. We stress that we are able with these latter models to faithfully interpret traditional Boolean GL modal logic, unlike step-indexing in the topos of trees, which validates the sentence $\neg \neg \Box 0$. \TODOinline{Clarify what we mean by this. Connect to the archetypal examples from the beginning.}

\subsection{The main initiality-based construction}
\begin{construction}\label{SpecialInitialIntrosp}
Let $Special$ be a left comma-stable sub-2-category of $\LexCat$, in the sense of \magicref{CommaStableDefn}. Furthermore, suppose $Special$ has an initial object $T$, and that this $T$ has an internal lexcategory $C$ such that $\Glob{C}$ is itself an object of $Special$.

Then we obtain a unique lexfunctor $\introS \in Special(T, \Glob{C})$, by the initiality of $T$.

Furthermore, by \magicref{CommaKanStrongSigmesque}, we have that $\id_T$ is initial within $\LexCat(T, T)$. Thus, in particular, there is a unique natural transformation $\introN : \id_T \to \Hom_C(1, \introS(-))$. In this way, we obtain an introspective theory $\langle T, C, \introS, \introN \rangle$.
\end{construction}

\begin{theorem}\label{SpecialInitialIntrospIsInitial}
Let $Special$ and $\langle T, C, \introS, \introN \rangle$ be given as in \magicref{SpecialInitialIntrosp} above.

Consider also any other introspective theory $\langle T', C', \introS', \introN' \rangle$ such that $\introS' : T' \to \Glob{C'}$ lives in $Special$. By the initiality of $T$ within $Special$, we get a unique special lexfunctor $H : T \to T'$. If this $H$ is such that $H[C] = C'$, then this $H$ is also an introspective theory homomorphism (in the sense of \TODOinline{cite}). The condition that $H$ interacts appropriately with $\introS$ and $\introS'$ is automatic by the initiality of $T$ within $Special$. Furthermore, the condition that $H$ interacts appropriately with $\introN$ and $\introN'$ is automatic by the fact that $H$ is initial within $\LexCat(T, T')$, thanks to \magicref{CommaKanStrongSigmesque}.
\end{theorem}

\subsection{Self-initializing and super-initializing theories}
\subsubsection{The initial model as a geminal category}
\begin{construction}\label{InitoGeminalYieldsGeminal}
Suppose given some lexcategory $Th$ (the theory of \quote{gadgets}), along with a lexcategory $C$ internal to $Th$ (the underlying lexcategory of a gadget).

Furthermore, suppose given an initial gadget $G_1$ with an initial internal gadget $G_2$. That is, suppose given some lexcategory $V$ such that $\LexCat(Th, V)$ has an initial object (our $G_1$) and such that $\LexCat(Th, \Glob{G_1[C]})$ has an initial object (our $G_2$).

Because $G_1$ is initial, we automatically get a unique homomorphism $F_1 : G_1 \to \Gamma{G_2}$. And because $G_2$ is an initial $G$-internal gadget, we automatically get a unique $G_1$-internal homomorphism $F_2 : G_2 \to \Gamma[G_3]$ where $G_3 = F_1[G_2]$.

This setup is thus a geminal gadget internal to $V$ (with the equations $E_1$ and $E_2$ of \magicref{CompactGeminalCatDefn} automatically satisfied by the uniqueness observations in the previous paragraph).

Indeed, this is the unique way to equip $\langle G_1, G_2 \rangle$ as a geminal gadget.
\end{construction}

In practice, when an initial gadget has an initial internal gadget like above, this is usually not just some accident (caused by a paucity of globally defined structures, say), but rather, is due to the theory of gadgets itself encoding the construction of an internal initial gadget:
\begin{definition}
Suppose, as above, given some lexcategory $Th$ (the theory of \quote{gadgets}), along with a lexcategory $C$ internal to $Th$ (the underlying lexcategory of a gadget).

If every gadget has an initial internal gadget, and every gadget homomorphism preserves these initial internal gadgets, then we say the theory of gadgets is \defined{self-initializing}.

In other words, $Th$ is self-initializing if $\LexCat(Th, \Glob{C})$ has an initial object, and this initiality is preserved by $\InducedHomo{f}{C}$ for every lexfunctor $f$ out of $Th$.
\end{definition}

The above all admits a generalization worth noting:

\begin{construction}\label{SuperInitoGeminalYieldsGeminal}
Suppose given some lexfunctor $i : Th \to Th'$, along with a lexcategory $C$ internal to $Th$. Call $Th$ the theory of \quote{gadgets}, and $Th'$ the theory of \quote{supergadgets}. Via $i$, every supergadget has an underlying gadget, and via $C$, every gadget has an underlying lexcategory.

Furthermore, suppose given an initial gadget $G_1$ with an initial internal supergadget $G_2$. That is, suppose given some lexcategory $V$ such that $\LexCat(Th, V)$ has an initial object (our $G_1$) and such that $\LexCat(Th', \Glob{G_1[C]})$ has an initial object (our $G_2$).

Because $G_1$ is initial, we automatically get a unique gadget homomorphism $F_1: G_1 \to \Gamma{G_2}$. And because $G_2$ is an initial $G_1$-internal supergadget, we automatically get a unique $G_1$-internal supergadget homomorphism $F_2 : G_2 \to \Gamma[G_3]$ where $G_3 = F_1[G_2]$.

This setup is thus a geminal gadget internal to $V$ (with the equations $E_1$ and $E_2$ of \magicref{CompactGeminalCatDefn} automatically satisfied by the uniqueness observations in the previous paragraph).

Indeed, this is the unique way to equip $\langle G_1, G_2 \rangle$ as a geminal gadget $\langle G_1, G_2; F_1, F_2 \rangle$ such that $F_2$ comes from a supergadget homomorphism.
\end{construction}

And again, in practice, when an initial gadget has an initial internal supergadget like above, this is usually not just some accident caused by a paucity of globally defined structures, but rather, is due to the theory of gadgets itself encoding the construction of an internal initial supergadget:

\begin{definition}
Suppose, as above, given some lexfunctor $i : Th \to Th'$, along with a lexcategory $C$ internal to $T$. We call $T$ the theory of \quote{gadgets}, and $Th'$ the theory of \quote{supergadgets}. Via $i$, every supergadget has an underlying gadget, and via $C$, every gadget has an underlying lexcategory.

If every gadget has an initial internal supergadget, and every gadget homomorphism preserves these initial internal supergadgets, then we say the theory of gadgets (or more precisely, the extension of the theory of gadgets by the theory of supergadgets) is \defined{super-initializing}.

In other words, this situation is super-initializing if $\LexCat(Th', \Glob{C})$ has an initial object, and this initiality is preserved by $\InducedHomo{f}{C}$ for every lexfunctor $f$ out of $Th$.

Note in this case that $Th'$ will itself be self-initializing, as every supergadget is a fortiori a gadget (thus having an initial internal supergadget), and every supergadget homomorphism is a fortiori a gadget homomorphism (thus preserving initial internal supergadgets).
\end{definition}

The self-initializing situation is of course the special case of the super-initializing situation where $Th' = Th$ and $i$ is the identity.

There are a number of self- and super-initializing theories in the wild, which thus immediately give us examples of geminal categories in the wild.

For example: It is straightforward to show that every NNO-topos has internal initial models of every finitely axiomatizable lex theory, preserved by every NNO-topos homomorphism. This was the observation of \magicref{NNOToposInternalInitialFinite}

It is a little more difficult, but also possible to show that more generally, every arithmetic universe has internal initial models of every finitely axiomatizable lex theory, preserved by every arithmetic functor. This was the observation of \magicref{AUInternalInitialFinite}.

Thus, any finitely axiomatizable extension of the theory of arithmetic universes is self-initializing. More generally, given any $Th$ extending the theory of arithmetic universes, and any finitely axiomatizable $Th'$ extending $Th$, the extension of $Th$ to $Th'$ is super-initializing. 

This immediately gives us many examples of geminal categories using the above construction. For example, as one random example among myriad, we can obtain a geminal category $\langle G_1, G_2 \rangle$ where $G_1$ is the initial cartesian closed arithmetic universe and $G_2$ is its internal initial NNO-topos satisfying the internal axiom of choice.

\TODOinline{Note that when a theory is super-initializing, then we have that in the geminal category $\gamma = \langle G_1 G_2; F_1, F_2 \rangle$, $G_3 = F_1[G_2]$ is also an initial supergadget internal to $G_2$, and $F_3 = F_1[F_2]$ is a supergadget homomorphism. Thus, $\InteriorGeminal{\gamma}$ is itself given by the same construction of a geminal category for the self-initializing theory of supergadgets.}

We have discussed all this just in the context of geminal categories, but this extends to give analogous constructions of introspective theories as well. We discuss these next.

\sTODOinline{Maybe delete most of this section (except for the definitions of self- and super-initializing theories) and only give examples of introspective theories.}

\subsubsection{The theory of initial models as an introspective theory}
Throughout the following, we say say an initial object in a category of the form $\LexCat(T, S)$ is an initial model of $T$ internal to $S$. Given lexcategories $S$ and $S'$ both containing initial internal models of $T$, we say a lexfunctor from $S$ to $S'$ preserves initial models of $T$ if its composition with the initial model of $T$ in $S$ is the initial model of $T$ in $S'$.

By the 2-category $\initMod{T}$, we mean $\LexCat$ with its objects restricted to just those lexcategories with initial internal models of $T$, and its $1$-cells restricted to just those lexfunctors which preserve initial models of $T$. (The $2$-cells remain unchanged.)

\begin{theorem}\label{InitialModelWithInitialModel}
For every \setsmall/ lexcategory $Th$, there is an initial object within $\initMod{Th}$.
\end{theorem}
\begin{proof}
This is in exactly the same way that we have familiar constructions such as of the initial NNO-topos, the initial arithmetic universe, the initial lexcategory with countable products, etc.

In more detail, the category of strict lexcategories with internal initial models of $Th$, and strict lexfunctors strictly preserving these internal initial models, is the category of models of an infinitary quasi-equational theory (whose infinitary operations have arity bounded by a \setsmall/ cardinal dependent on the size of $Th$), and thus has an initial object. This initial strict structure furthermore is initial in the non-strict context, because all the relevant operations (finite limits, initial models of $Th$) are given by universal properties, so that any functor out of the initial strict structure preserving these in a non-strict sense is canonically isomorphic to a functor preserving these strictly on the nose.
\end{proof}

\begin{construction}
If $Th$ is a self-initializing theory, then $\initMod{Th}$ is left comma-stable within $\LexCat$, via \magicref{InitialModelCommaStable}. Furthermore, it has an initial object $T$ via \magicref{InitialModelWithInitialModel}. This $T$ by definition has an initial internal model of $Th$; that is, there is an initial $f \in \LexCat(Th, T)$. Furthermore, since $Th$ is self-initializing, it contains an internal category $C$ such that $\Glob{f[C]}$ itself is an object of $\initMod{Th}$.

We can thus invoke \magicref{SpecialInitialIntrosp} to obtain a unique introspective theory $\langle T, f[C], \introS, \introN \rangle$ where $\introS$ is a map in $\initMod{Th}$.
\end{construction}

There is an extension of the above construction to super-initializing theories. However, it is a bit trickier. The key issue is to construct, for a super-initializing lexfunctor $i : Th \to Th'$, a lexcategory which captures simultaneously the properties which are shared by initial models of $Th$ and by initial models of $Th'$. We sketch out the construction as follows:

\begin{construction}
Let $i : Th \to Th'$ be a lexfunctor, such that models of $Th$ are considered gadgets, models of $Th'$ are considered supergadgets, and via $i$ every supergadget is thought of as having an underlying gadget.

Given a lexcategory $L$, we will say that a $Th'$-initial model of $Th$ in $L$ is an internal gadget $\alpha$ in $L$, along with, for every internal supergadget $\beta$ in $L$, a chosen gadget homomorphism from $h_\beta : \alpha \to \beta$, such that furthermore, these chosen homomorphisms are closed under postcomposition with supergadget homomorphisms (that is, for any supergadget homomorphism $f : \beta \to \beta'$ in $L$, we have that $f \circ h_{\beta} = h_{\beta'}$, as gadget homomorphisms). \TODOinline{Illustrate this diagrammatically}. Note that this structure is NOT given by a universal property! There may be multiple non-equivalent ways to choose such structure within $L$.

We may define a 2-category $Special$ whose objects are lexcategories along with a choice of $Th'$-initial models of $Th$ in these lexcategories. The 1-cells of $Special$ will be lexfunctors which preserve these $Th'$-initial models of $Th$, in the sense of taking designated gadgets and homomorphisms to designated gadgets and homomorphisms. 2-cells between these are just ordinary natural transformations. There is an obvious 2-functor from this $Special$ to $\LexCat$.

This $Special$ has an initial object $A$. This $A$ contains a designated internal gadget $G$ with an underlying lexcategory $C$. Because of the super-initializing property of gadgets and supergadgets, within $\Glob{C}$, there is an internal initial supergadget. Thus $\Glob{C}$ can uniquely be equipped as an object of $Special$ such that the designated gadget in $\Glob{C}$ is its internal initial supergadget. And thus there is a unique lexfunctor $\introS : A \to \Glob{C}$ which takes $G$ to the initial supergadget $G'$ in $\Glob{C}$.

Finally, we shall show that there is a unique natural transformation $\introN : \id_A \to \Hom_C(1, \introS(-))$ such that action of this $\introN$ restricted to $G$ is a designated gadget homomorphism. The argument for this is completely analogous to \magicref{SpecialInitialIntrosp}, with appropriate modification for the fact that $Th'$-initial models of $Th$ are not given by a universal property and thus $Special$ is not merely a subcategory of $\LexCat$.

Specifically, we will consider the comma category $\comma{\id_A}{f_Y}$ where $f_Y = \Hom_A(1, \introS(-)) : A \to A$. Note that this $f_Y$, when applied to the designated gadget in $A$, yields the underlying gadget of a supergadget.

By a modification of \magicref{CommaKan}, we find a unique way to equip $\comma{\id_A}{f_Y}$ as having a $Th'$-initial model of $Th$ which is preserved by both projections, such that the induced homomorphism on $G$ is a designated homomorphism.

Then we may apply a modification of \magicref{CommaKanStrongSigmesque} to conclude that the identity on $A$ has a unique natural transformation into $f_Y$ whose induced action on $G$ is a designated homomorphism.

\TODOinline{Clean up this entire writeup. Or maybe scrap this theorem for the time being, since no one will care about it?}
\end{construction}

\subsubsection{A self-initializing theory with uncountable and uncomputable flavor}
\TODOinline{Consider the free topos with countable (co)products, which has an internal free topos with countable (co)products as well, with internal and external views coinciding on what things have or preserve countable coproducts.}

\TODOinline{Note that this contains true arithmetic (in the sense of all true statements in the language of first-order arithmetic), but is still subject to \Loeb/'s theorem and \Goedel/'s incompleteness theorems. It's just that its consistency sentence isn't expressible in first-order arithmetic; that is, this structure is not definable in first-order arithmetic.}

\sTODOinline{A self-initializing theory with countable but uncomputable flavor}

\subsection{The initial arithmetic universe}
\begin{construction}\label{IAUAsIntrospGeneral}
Let $\IAU$ be the initial arithmetic universe, and let $C$ be any arithmetic universe internal to $\IAU$. Then by the combination of \magicref{SpecialInitialIntrosp} and \magicref{CommaStableArithmetic}, we obtain an introspective theory $\langle \IAU, C, \introS, \introN \rangle$ in which $\introS : \IAU \to \Glob{C}$ is the unique such arithmetic functor, and the natural transformation $\introN : \id_T \to \Hom_C(1, \introS(-))$ is uniquely determined.
\end{construction}

\begin{observation}
Note that the above construction can be applied using ANY arithmetic universe internal to $\IAU$. One natural choice is where $C$ is taken to be the initial arithmetic universe internal to $IAU$ (which exists thanks to \magicref{AUInternalInitialFinite} and \magicref{NNOToposAndAUAreFinitelyAxiomatized}). In this case, the natural transformation $\introN$ we obtain is the same as the one constructed in Lemma 5.15 of \autocite{van2020g}.
\end{observation}
\TODOinline{Note in this case also that $\introS : \IAU \to \Glob{\IAU'}$ is an equivalence, since the global sections functor on $\IAU$ is also the unique arithmetic functor to $\Set$ (as both are initial among lexfunctors), so that $\Glob{\IAU'} = \IAU$, which has the identity as its only endoarithmetic functor.}

Note that nothing was special about the initial arithmetic universe for \magicref{IAUAsIntrospGeneral}; it was just an invocation of our general construction \magicref{SpecialInitialIntrosp}. We could similarly construct introspective theories using initial objects of any kind of structure left comma-stable over $\LexCat$, given any structure of the same kind internal to the initial one. What's noteworthy about $\IAU$ is just that it happens to actually contain interesting internal structures (such as internal categories corresponding to Peano Arithmetic, to ZFC, to the initial internal arithmetic universe, etc), whereas the initial lexcategory, or initial regular category, or initial lexcategory with finite pullback-stable colimits, or such things, all have a paucity of interesting internal structures.

We now use \magicref{IAUAsIntrospGeneral} to give a fuller account of our original guiding example of an introspective theory based on traditional logical theories, from \magicref{SigmaModelComplex}.

\begin{theorem}\label{Sigma1ModelIAUConnection}
The introspective theory described in \magicref{SigmaModelComplex} is the maximal localization, in the sense of \magicref{LocalizeIntrosp}, of an introspective theory produced by \magicref{IAUAsIntrospGeneral}.
\end{theorem}
\begin{proof}
Recall the categories $\Zfin$ and $\ZfinSigma$ from \magicref{SigmaModelComplex}. Here, $\Zfin$ is an exact category whose objects and morphisms correspond to definable classes and graphs of functions between these in the theory ZF-Finite, with morphisms taken modulo provable equality in ZF-Finite. While $\ZfinSigma$ is the subcategory of $\Zfin$ where the definability conditions are further restricted to $\Sigma_1$-definability.

It is readily verified that $\Zfin$ is an arithmetic universe. Thus, there is a unique arithmetic functor $!_{\Zfin} : \IAU \to \Zfin$. Let $M$ be the set of morphisms in $\IAU$ which are taken to isomorphisms by this $!_{\Zfin}$. By \magicref{ArithmeticLocalization}, this $!_{\Zfin}$ factors uniquely through the arithmetic localization $\IAU[M^{-1}]$. \TODOinline{Illustrate}. Using \magicref{IsLexLocalizationLemma}, it is straightforwardly, if tediously, verified that this $\IAU[M^{-1}]$ is in fact $\ZfinSigma$, with $!_{\Zfin}$ thus being the unique arithmetic functor from $\IAU$ to $\ZfinSigma$ followed by the inclusion from $\ZfinSigma$ to $\Zfin$. That is to say, the role played by the $\Sigma_1$ constraints in defining $\ZfinSigma$ is precisely to make $\ZfinSigma$ an arithmetic localization of $\IAU$.

\newcommand{\IAUGlob}{\mathrm{Glob}_{\IAU}}
Note also that, as $\Zfin$ and $\ZfinSigma$ are both computably enumerable arithmetic universes internal to $\Set$, we find, in keeping with \magicref{ComputableMeansIAUInternal}, that these are the images in $\Set$ of arithmetic universes internal to the initial arithmetic universe $\IAU$. That is, letting $\IAUGlob$ be the unique arithmetic functor from $\IAU$ to $\Set$ (which is the same as the global sections functor $\Hom_{\IAU}(1, -)$, thanks to \magicref{GlobalIsArithmeticOnIAU}), we have arithmetic universes $\IAUGlob^{-1}[\Zfin]$ and $\IAUGlob^{-1}[\ZfinSigma]$ such that the images of these under $\IAUGlob$ are $\Zfin$ and $\ZfinSigma$, respectively.

Via \magicref{SpecialInitialIntrosp}, we thus obtain an introspective theory $\langle \IAU, \IAUGlob^{-1}[\Zfin] \rangle$, whose $\introS : \IAU \to \Glob{\IAUGlob^{-1}[\Zfin]} = \Zfin$ is the unique arithmetic functor from $\IAU$ to $\Zfin$. Thus the set of morphisms in $\IAU$ sent to isomorphisms by this $\introS$ is the same as the $M$ defined above.

Now let $\langle \ZfinSigma, \InnerZfin \rangle$ be the introspective theory described in \magicref{SigmaModelComplex}.

It is readily verified that $\InnerZfin$ and $\IAUGlob^{-1}[\Zfin]$ can be chosen so that the former is the image of the latter under the unique arithmetic functor $!_{\ZfinSigma} : \IAU \to \ZfinSigma$. Furthermore, it is readily verified that $\introS : \ZfinSigma \to \Glob{\InnerZfin}$ is an arithmetic functor. Thus by \magicref{SpecialInitialIntrosp}, the unique arithmetic functor $!_{\ZfinSigma} : \IAU \to \ZfinSigma$ is in fact an introspective theory homomorphism from $\langle \IAU, \IAUGlob^{-1}[\Zfin] \rangle$ to $\langle \ZfinSigma, \InnerZfin \rangle$.

Since $!_{\ZfinSigma} : \IAU \to \ZfinSigma$ was, as noted above, the same as the arithmetic localization $\IAU \to \IAU[M^{-1}]$, we may invoke \magicref{LocalizeIntrosp} to conclude that the introspective theory homomorphism from $\langle \IAU, \IAUGlob^{-1}[\Zfin] \rangle$ to $\langle \ZfinSigma, \InnerZfin \rangle$ is the same as the localization of the introspective theory $\langle \IAU, \IAUGlob^{-1}[\Zfin] \rangle$ at $M$, which by the observation three paragraphs ago is the maximal localization of this introspective theory.

This concludes the proof.
\end{proof}

Clearly, there is nothing special about ZF-Finite in the above. From any traditional computably enumerable logical theory extending, say, Peano Arithmetic (though even this is much stronger than necessary), we get a computably enumerable arithmetic universe in the style of $\InnerZfin$, which is coded by some arithmetic universe $C$ internal to $\IAU$. For example, we can do this with ZFC, or vNBG, or ZFC + \quote{ZFC is not consistent}, or any such thing. For each of these, we get correspondingly an introspective theory $\langle IAU, C \rangle$ via \magicref{IAUAsIntrospGeneral}, whose maximal localization (in the sense of \magicref{LocalizeIntrosp}) is perfectly analogous to the introspective theory $\langle \ZfinSigma, \InnerZfin \rangle$ from \magicref{SigmaModelComplex}. Also, by looking at $\Glob{C}$ within this introspective theory $\langle IAU, C \rangle$, we also obtain in each such case a suitable geminal category whose underlying lexcategory is the one whose objects and morphisms correspond to arbitrary definable classes and definable graphs of functions between them modulo provable equivalence in the chosen logical theory.

\TODOinline{Observe that in this section we constructed the initial arithmetic universe as an introspective theory. This is different in flavor from the previous section, where we constructed the initial NNO-topos or the like not as an introspective theory but as a geminal category.}

\subsection{Models based on presheaf categories}\label{ModelsBasedOnPresheafCategories}
\subsubsection{The general construction, yielding locally introspective theories}

\begin{construction}\label{GeneralPresheafLocalIntrosp}
Let $i : D \to S$ be an arbitrary functor between \setsmall/ categories $D$ and $S$.

Furthermore, suppose given some subset of the morphisms of $S$ which is closed under composition on either side with arbitrary morphisms. That is, suppose given some bifunctor $\SpecialHom_S(-, =) : S^{op} \times S \to \Set$ which is a subfunctor of $\Hom_S(-, =) : S^{op} \times S \to \Set$.

By currying, we may read this $\SpecialHom$ as a functor from $S$ to $\Psh{S}$ which is a subfunctor of the Yoneda embedding. This extends to a endofunctor $\Prior$ on $\Psh{S}$ which is a subfunctor of the identity and which is a left adjoint, like so: \TODOinline{Discuss Yoneda extension in preliminaries}

We may now define a locally introspective theory $\langle \Psh{S}, C\rangle$ like so:

% https://q.uiver.app/?q=WzAsNCxbMiwwLCJcXG9we1xcUHNoe1N9fSJdLFs0LDEsIlxcb3B7XFxQc2h7RH19Il0sWzYsMCwiXFxMZXhDYXQiXSxbMCwwLCJcXG9we1xcUHNoe1N9fSJdLFswLDEsIlxcb3B7XFxsZWZ0KCBcXHB1bGxBbG9uZ3tpfSBcXHJpZ2h0KX0iLDJdLFsxLDIsIlxcUHNoe0R9Ly0iLDJdLFswLDIsIlxcUHNoe1N9Ly0iXSxbMywwLCJcXGlkIiwwLHsibGV2ZWwiOjIsInN0eWxlIjp7ImhlYWQiOnsibmFtZSI6Im5vbmUifX19XSxbMywwLCJcXG9we1xcUHJpb3J9IiwyLHsiY3VydmUiOjV9XSxbNiwxLCJcXHB1bGxBbG9uZ3tpfSIsMSx7InNob3J0ZW4iOnsic291cmNlIjoyMH19XSxbNyw4LCIiLDEseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV1d
\[\begin{tikzcd}
	{\op{\Psh{S}}} && {\op{\Psh{S}}} &&&& \LexCat \\
	&&&& {\op{\Psh{D}}}
	\arrow["{\op{\left( \pullAlong{i} \right)}}"', from=1-3, to=2-5]
	\arrow["{\Psh{D}/-}"', from=2-5, to=1-7]
	\arrow[""{name=0, anchor=center, inner sep=0}, "{\Psh{S}/-}", from=1-3, to=1-7]
	\arrow[""{name=1, anchor=center, inner sep=0}, "\id", Rightarrow, no head, from=1-1, to=1-3]
	\arrow[""{name=2, anchor=center, inner sep=0}, "{\op{\Prior}}"', curve={height=30pt}, from=1-1, to=1-3]
	\arrow["{\pullAlong{i}}"{description}, shorten <=3pt, Rightarrow, from=0, to=2-5]
	\arrow[shorten <=4pt, shorten >=4pt, Rightarrow, from=1, to=2]
\end{tikzcd}\]

The unlabelled 2-cell on the left of the above diagram is the one given by the inclusion of $\Prior$ into the identity (which is turned around when considered as endodunctors of $\op{\Psh{S}}$ instead of $\Psh{S}$).

Here, we take the $\Psh{S}$-indexed lexcategory $C$ to be the bottom composite path, and of course our $\introF$ is the composite 2-cell from top to bottom. The local \repsmall/ness of this $C$ follows via \magicref{RepLocallySmallRightAdjoint} from the observations that $\Prior$ and $\pullAlong{i}$ both have right adjoints and $\Psh{D}/-$ is locally \repsmall/ (i.e., $\Psh{D}$ is locally cartesian closed).

(Pedantically, we caution that in the above diagram, $\LexCat$ must be understood as containing not just \setsmall/ lexcategories but also large lexcategories, so that this $\LexCat$ may serve as the target of the self-indexings of the large categories $\Psh{S}$ and $\Psh{D}$.)

This construction can be seen as \magicref{TrivialPreIntrosp} applied to $\Psh{D}$, followed by \magicref{IntrospPullback} using the pullback-preserving functor $\pullAlong{i} : \Psh{S} \to \Psh{D}$, followed by \magicref{IntrospInternalMap} using a map derived from the inclusion of $\Prior$ into the identity on $\Psh{S}$.
\end{construction}

\TODOinline{Relate to introductory examples from the first chapter}

Unfortunately, the above construction does not in general yield a fully introspective theory. We cannot expect this $C$ to be \repsmall/. \TODOinline{And indeed, many examples of the above construction will not satisfy \Loeb/'s theorem, most easily seen for K4 frames that are not GL}.

But by passing to suitable full sublexcategories of $\Psh{S}$ and $\Psh{D}/-$ a la \magicref{SubPreIntrosp} and \magicref{SubCPreIntrosp}, we may hope to obtain an introspective theory, and indeed we shall always be able to do so in a convenient way whenever $\SpecialHom$ satisfies a certain well-foundedness condition. The details of this process are described in the next section.

\subsubsection{Presheaves with variable cardinality constraints}

\newcommand{\KFiberPsh}[2]{\Psh{#2}/_{#1}-}

\newcommand{\KPshGlobal}[2]{\operatorname{Psh}_{#1}(#2)}

\newcommand{\KDecObject}[2]{#1\mathrm{-Dec}(#2)}

Let $X$ be a category internal to $\Set$, and let $K$ be a function from $\Ob(X)$ to sets of sets. We call any choice of such $K$ a \defined{ramp} on $X$.

By a $K$-presheaf on $X$, we mean a presheaf $E$ on $X$ such that $E(x) \in K(x)$ for each $x \in X$. These comprise a full subcategory of $\Psh{X}$, which we may call $\KPshGlobal{K}{X}$.

More generally, given an arbitrary presheaf $P$ on $X$, we define the notion of a $K$-decoration on $P$. This is a function $f$ which assigns to each $x \in X$ and $p \in P(x)$ an element $f(x, p) \in K(x)$, along with a presheaf $E$ on $X$ and a slice $\pi : E \to P$ in $\Psh{X}/P$ satisfying the condition on its fibers that $\pi_x^{-1}(p) = f(x, p)$ for each $x \in X$ and $p \in P(x)$. (Thus, all that is left to specify in $E$ is its restriction maps, in a compatible fashion with the morphism structure of $X$ and with the projection map to $P$.)

That is, a $K$-decoration of $P$ is a presheaf over $P$ whose fibers at each aspect $P(x)$ of $P$ are each given by elements of the corresponding $K(x)$. Thinking of each $K(x)$ as a genuine set whose elements can be compared for equality, the $K$-decorations of $P$ also comprise a genuine set (they can be compared for equality and it is readily observed that in size they comprise a set rather than a proper class).

Note that $K$-decorations of the terminal presheaf amount to the same thing as objects of $\KPshGlobal{K}{X}$.

Given a map $m : P_1 \to P_2$ in $\Psh{X}$, we straightforwardly can pull a $K$-decoration of $P_2$ back to a $K$-decoration of $P_1$. \TODOinline{Describe details or is it obvious? We compose $f$ for $P_2$ with the action of $m$ to get $f$ for $P_1$, and we literally take the pullback of $\pi$ for $P_2$ along $m$ to get $\pi$ for $P_1$}. This is strictly functorial, and thus we get a contravariant map from $\Psh{X}$ to $\Set$.

It is also straightforward to observe that this map takes small colimits in $\Psh{X}$ to small limits in $\Set$. Thus, by \TODOinline{Put lemma in preliminaries explaining that any small colimit-to-limit preserving presheaf on a presheaf category is representable}, this is in fact $\Psh{X}$-small. We obtain a particular object $\KDecObject{K}{X}$ in $\Psh{X}$ and a $K$-decoration of $\KDecObject{K}{X}$, such that any $K$-decoration of any object in $\Psh{X}$ is the pullback of this one along a unique morphism. In particular, this gives us a slice above $\KDecObject{K}{X}$ such that every other slice with $K$-sized fibers, so to speak, is a pullback of this one.

We may now consider the full subcategory of the self-indexing $\Psh{X}/-$ restricted to pullbacks of this generic slice; call this $\KFiberPsh{K}{X}$. This indexed category has a small set of objects (given by $\KDecObject{K}{X}$), and is locally small (as it is a full subcategory of $\Psh{X}/-$, which is locally small by the local cartesian closure of $\Psh{X}$). Thus, it is a small indexed category. Indeed, it can be seen as an internal indexed category with set of objects specifically $\KDecObject{K}{X}$.

Note that the global aspect of $\KFiberPsh{K}{X}$ is $\KPshGlobal{K}{X}$, by our previous observation about $K$-decorations of the terminal presheaf.

Observe that if each $K(x)$ for $x \in X$ is closed under finite products and subsets, then each $K(x)$ comprises the objects of a full sublexcategory of $\Set$, and $\KFiberPsh{K}{X}$ is in fact a full sublexcategory of the self-indexing $\Psh{X}/-$, with $\KPshGlobal{K}{X}$ accordingly being a full sublexcategory of $\Psh{X}$. \TODOinline{More details on this point? Also, may want to invoke lemma from the Preliminaries that a small indexed category whose every aspect is a lexcategory and whose every reindexing preserves finite limits non-strictly is in fact an internal lexcategory?}. From now on, we will always make this assumption on our ramps $K$. [It would actually suffice for our purposes to make the slightly weaker presumption that each $K(x)$ comprises the objects of a full sublexcategory of $\Set$, but for convenience, we go ahead and presume here closure under arbitrary subsets.]

Observe that the conditions defining a $K$-decoration of $P \in \Psh{X}$ only depend on the values of $K(x)$ at $x \in X$ for which $P(x)$ is inhabited. The values of $K$ at $x$ for which $P(x)$ is empty play no role. In other words, the aspect of $\KFiberPsh{K}{X}$ at presheaf $P$ only depends on the value of $K$ at $x \in X$ for which $P(x)$ is inhabited.

Observe that if we are given an arbitrary functor $i: D \to S$, along with ramps $K_S$ on $S$ and $K_D$ on $D$ satisfying the compatibility condition that $K_S(i(d)) \subseteq K_D(d)$ for each $d \in D$, then applying $\pullAlong{i} : \Psh{S} \to \Psh{D}$ to a presheaf in $\KPshGlobal{K_S}{S}$ yields a presheaf in $\KPshGlobal{K_D}{D}$; we may refer to this restricted action by the same name $\pullAlong{i} : \KPshGlobal{K_S}{S} \to \KPshGlobal{K_D}{D}$. [For convenience, we may go ahead and even define $K_D$ as $K_S \circ i$ to ensure the compatibility condition, though this is stronger than needed for our purposes.]

\TODOinline{Observe how $\pullAlong{i}$ restricts as a 2-cell to these cardinality constrained presheaves.}

\subsubsection{Modifying the general construction to use these constraints}

From the above, we have a pre-introspective theory $\langle \KPshGlobal{K_S}{S}, \ldots \rangle$ in which $\introF$ is given by the composite 2-cell in the following diagram:

\begin{construction}\label{CardinalityConstrainedPresheafIntrosp}
% https://q.uiver.app/?q=WzAsNSxbMCwwLCJcXG9we1xcS1BzaEdsb2JhbHtLX1N9e1N9fSJdLFszLDAsIlxcTGV4Q2F0Il0sWzMsMiwiXFxvcHtcXFBzaHtEfX0iXSxbMSwyLCJcXG9we1xcUHNoe1N9fSJdLFswLDIsIlxcb3B7XFxQc2h7U319Il0sWzAsMSwiXFxLUHNoR2xvYmFse0tfU317U30vLSJdLFszLDIsIlxcb3B7XFxsZWZ0KFxccHVsbEFsb25ne2l9XFxyaWdodCl9IiwyXSxbMiwxLCJcXEtGaWJlclBzaHtLX0R9e0R9IiwxXSxbNCwzLCJcXGlkIl0sWzAsNF0sWzQsMywiXFxvcHtcXFByaW9yfSIsMix7ImN1cnZlIjo1fV0sWzUsNiwiXFxwdWxsQWxvbmd7aX0iLDIseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzgsMTAsIiIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XV0=
\[\begin{tikzcd}
	{\op{\KPshGlobal{K_S}{S}}} &&& \LexCat \\
	\\
	{\op{\Psh{S}}} & {\op{\Psh{S}}} && {\op{\Psh{D}}}
	\arrow[""{name=0, anchor=center, inner sep=0}, "{\KPshGlobal{K_S}{S}/-}", from=1-1, to=1-4]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{\op{\left(\pullAlong{i}\right)}}"', from=3-2, to=3-4]
	\arrow["{\KFiberPsh{K_D}{D}}"{description}, from=3-4, to=1-4]
	\arrow[""{name=2, anchor=center, inner sep=0}, "\id", from=3-1, to=3-2]
	\arrow[from=1-1, to=3-1]
	\arrow[""{name=3, anchor=center, inner sep=0}, "{\op{\Prior}}"', curve={height=30pt}, from=3-1, to=3-2]
	\arrow["{\pullAlong{i}}"', shorten <=9pt, shorten >=9pt, Rightarrow, from=0, to=1]
	\arrow[shorten <=4pt, shorten >=4pt, Rightarrow, from=2, to=3]
\end{tikzcd}\]
\end{construction}

\TODOinline{Relate this to the following diagrams, relating it to our original general construction}

% https://q.uiver.app/?q=WzAsNSxbMCwwLCJcXG9we1xcS1BzaEdsb2JhbHtLX1N9e1N9fSJdLFs0LDAsIlxcTGV4Q2F0Il0sWzMsMiwiXFxvcHtcXFBzaHtEfX0iXSxbMSwyLCJcXG9we1xcUHNoe1N9fSJdLFswLDIsIlxcb3B7XFxQc2h7U319Il0sWzAsMSwiXFxLUHNoR2xvYmFse0tfU317U30vLSJdLFszLDIsIlxcb3B7XFxsZWZ0KFxccHVsbEFsb25ne2l9XFxyaWdodCl9IiwyXSxbMiwxLCJcXEtGaWJlclBzaHtLX0R9e0R9Il0sWzQsMywiXFxpZCJdLFswLDRdLFs0LDMsIlxcb3B7XFxQcmlvcn0iLDIseyJjdXJ2ZSI6NX1dLFsyLDEsIlxcUHNoe0R9Ly0iLDIseyJjdXJ2ZSI6NX1dLFs1LDYsIlxccHVsbEFsb25ne2l9IiwyLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dLFs4LDEwLCIiLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzcsMTEsIiIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XV0=
\[\begin{tikzcd}
	{\op{\KPshGlobal{K_S}{S}}} &&&& \LexCat \\
	\\
	{\op{\Psh{S}}} & {\op{\Psh{S}}} && {\op{\Psh{D}}}
	\arrow[""{name=0, anchor=center, inner sep=0}, "{\KPshGlobal{K_S}{S}/-}", from=1-1, to=1-5]
	\arrow[""{name=1, anchor=center, inner sep=0}, "{\op{\left(\pullAlong{i}\right)}}"', from=3-2, to=3-4]
	\arrow[""{name=2, anchor=center, inner sep=0}, "{\KFiberPsh{K_D}{D}}", from=3-4, to=1-5]
	\arrow[""{name=3, anchor=center, inner sep=0}, "\id", from=3-1, to=3-2]
	\arrow[from=1-1, to=3-1]
	\arrow[""{name=4, anchor=center, inner sep=0}, "{\op{\Prior}}"', curve={height=30pt}, from=3-1, to=3-2]
	\arrow[""{name=5, anchor=center, inner sep=0}, "{\Psh{D}/-}"', curve={height=30pt}, from=3-4, to=1-5]
	\arrow["{\pullAlong{i}}"', shorten <=9pt, shorten >=9pt, Rightarrow, from=0, to=1]
	\arrow[shorten <=4pt, shorten >=4pt, Rightarrow, from=3, to=4]
	\arrow[shorten <=5pt, shorten >=5pt, Rightarrow, from=2, to=5]
\end{tikzcd}\]

% https://q.uiver.app/?q=WzAsNSxbMCwwLCJcXG9we1xcS1BzaEdsb2JhbHtLX1N9e1N9fSJdLFs0LDAsIlxcTGV4Q2F0Il0sWzMsMiwiXFxvcHtcXFBzaHtEfX0iXSxbMSwyLCJcXG9we1xcUHNoe1N9fSJdLFswLDIsIlxcb3B7XFxQc2h7U319Il0sWzAsMSwiXFxLUHNoR2xvYmFse0tfU317U30vLSJdLFszLDIsIlxcb3B7XFxsZWZ0KFxccHVsbEFsb25ne2l9XFxyaWdodCl9IiwyXSxbNCwzLCJcXGlkIl0sWzAsNF0sWzQsMywiXFxvcHtcXFByaW9yfSIsMix7ImN1cnZlIjo1fV0sWzIsMSwiXFxQc2h7RH0vLSIsMix7ImN1cnZlIjo1fV0sWzMsMSwiXFxQc2h7U30vLSIsMV0sWzcsOSwiIiwwLHsic2hvcnRlbiI6eyJzb3VyY2UiOjIwLCJ0YXJnZXQiOjIwfX1dLFsxMSwxMCwiXFxwdWxsQWxvbmd7aX0iLDAseyJzaG9ydGVuIjp7InNvdXJjZSI6MjAsInRhcmdldCI6MjB9fV0sWzUsMTEsIiIsMCx7InNob3J0ZW4iOnsic291cmNlIjoyMCwidGFyZ2V0IjoyMH19XV0=
\[\begin{tikzcd}
	{\op{\KPshGlobal{K_S}{S}}} &&&& \LexCat \\
	\\
	{\op{\Psh{S}}} & {\op{\Psh{S}}} && {\op{\Psh{D}}}
	\arrow[""{name=0, anchor=center, inner sep=0}, "{\KPshGlobal{K_S}{S}/-}", from=1-1, to=1-5]
	\arrow["{\op{\left(\pullAlong{i}\right)}}"', from=3-2, to=3-4]
	\arrow[""{name=1, anchor=center, inner sep=0}, "\id", from=3-1, to=3-2]
	\arrow[from=1-1, to=3-1]
	\arrow[""{name=2, anchor=center, inner sep=0}, "{\op{\Prior}}"', curve={height=30pt}, from=3-1, to=3-2]
	\arrow[""{name=3, anchor=center, inner sep=0}, "{\Psh{D}/-}"', curve={height=30pt}, from=3-4, to=1-5]
	\arrow[""{name=4, anchor=center, inner sep=0}, "{\Psh{S}/-}"{description}, from=3-2, to=1-5]
	\arrow[shorten <=4pt, shorten >=4pt, Rightarrow, from=1, to=2]
	\arrow["{\pullAlong{i}}", shorten <=13pt, shorten >=13pt, Rightarrow, from=4, to=3]
	\arrow[shorten <=6pt, shorten >=6pt, Rightarrow, from=0, to=4]
\end{tikzcd}\]

\TODOinline{Observe that we can pick a suitable ramp to make a fully introspective theory, when $S$ is well-founded under special maps.}

\TODOinline{Observe that this argument depends on the Axiom of Replacement. It would fail in ZFC - Replacement for the same reason that one could not construct $\bigcup_{n \in \nat} \mathcal{P}^n(\nat)$ or $\prod_{n \in \nat} \mathcal{P}^n(\nat)$.}

\TODOinline{Observe that we get \Loeb/'s theorem for our locally introspective theory from \Loeb/'s theorem for our fully introspective theory, by picking sufficiently large ramps for any particular instance.}

\TODOinline{Relate to introductory examples from the first chapter}

\subsection{Recap}
\TODO

\fileend